(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[809],{58469:(e,t,r)=>{"use strict";r.d(t,{En:()=>i,Ij:()=>u,XC:()=>c,hY:()=>s});var n=r(77231),a={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,n.N_,n.N_,n.N_],i=[n.N_,1,2,3,4,5,6,7];function c(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t){var r=function(e){var t,r,a=n.N_,c=n.N_,u=n.N_;return e.length>=2&&(a=e[0]>>3&31,c=null!==(t=s[(7&e[0])<<1|e[1]>>7])&&void 0!==t?t:48e3,u=null!==(r=i[e[1]>>3&15])&&void 0!==r?r:2),{profile:a,sampleRate:c,channels:u}}(t),a=r.profile,c=r.sampleRate,u=r.channels;e.codecpar.profile=a,e.codecpar.sampleRate=c,e.codecpar.chLayout.nbChannels=u,e.codecpar.channels=u}}function u(e){var t=a[e.sampleRate],r=e.chLayout.nbChannels,n=new Uint8Array(2);return n[0]=(31&e.profile)<<3|(14&t)>>1,n[1]=(1&t)<<7|(15&r)<<3,n}},90412:(e,t,r)=>{"use strict";r.d(t,{Ui:()=>s,XC:()=>a});var n=r(37246);function a(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=4){var r=s(t);e.codecpar.profile=r.profile,e.codecpar.level=r.level}}function s(e){var t=new n.A(e.length);t.appendBuffer(e),t.readU1(),t.readU(7);var r=t.readU(3),a=t.readU(5),s=t.readU1(),i=t.readU1()?10:8;return t.readU1()&&(i=12),{profile:r,level:a,tier:s,bitDepth:i,monochrome:t.readU1(),chromaSubsamplingX:t.readU1(),chromaSubsamplingY:t.readU1(),chromaSamplePosition:t.readU(2)}}},20620:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>v,XC:()=>U,ci:()=>g,oT:()=>b});var n=r(63939),a=r(50932),s=r(72739),i=r(729),c=r(31865),u=r(37246),o=r(4624),f=r(14686),d=r(71517),p=r(60264),l=r(37837),x=r(23991),h="src/avformat/codecs/h264.ts",k=3;function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.length>32&&(o.R8("h264 metadata's sps max length is 32, but get ".concat(e.length),h,159),e=e.slice(0,32)),e.length>256&&(o.R8("h264 metadata's pps max length is 256, but get ".concat(e.length),h,163),e=e.slice(0,256));var n=7;n=e.reduce((function(e,t){return e+2+t.length}),n),n=t.reduce((function(e,t){return e+2+t.length}),n);var a=e[0],c=A(a);66!==c.profile&&77!==c.profile&&88!==c.profile&&(n+=4,r.length&&(n=r.reduce((function(e,t){return e+2+t.length}),n)));var u=new Uint8Array(n),f=new i.A(u);return f.writeUint8(1),f.writeUint8(a[1]),f.writeUint8(a[2]),f.writeUint8(a[3]),f.writeUint8(252|k),f.writeUint8(224|31&e.length),s.__(e,(function(e){f.writeUint16(e.length),f.writeBuffer(e)})),f.writeUint8(t.length),s.__(t,(function(e){f.writeUint16(e.length),f.writeBuffer(e)})),66!==c.profile&&77!==c.profile&&88!==c.profile&&(f.writeUint8(252|c.chromaFormatIdc),f.writeUint8(248|c.bitDepthLumaMinus8),f.writeUint8(248|c.bitDepthChromaMinus8),r.length&&s.__(r,(function(e){f.writeUint16(e.length),f.writeBuffer(e)}))),u}function b(e){var t,r=(0,p.py)(e),n=!1;if(r.length>1){var a=[],c=[],u=[];r.forEach((function(e){var t=31&e[0];7===t?a.push(e):8===t?c.push(e):13===t&&u.push(e)})),a.length&&c.length&&(t=m(a,c,u)),r=r.filter((function(e){var t=31&e[0];return 9!==t&&8!==t&&7!==t&&13!==t}))}var o=r.reduce((function(e,t){return e+k+1+t.length}),0),d=(0,l.sY)(o),x=(0,f.s3)(d,o),h=new i.A(x);return s.__(r,(function(e){3===k?h.writeUint32(e.length):2===k?h.writeUint24(e.length):1===k?h.writeUint16(e.length):h.writeUint8(e.length),h.writeBuffer(e.subarray(0)),5==(31&e[0])&&(n=!0)})),{bufferPointer:d,length:o,key:n,extradata:t}}function v(e,t){var r;if(1&n.f[15](e+36)){var a=(0,d.iI)(e);if(!(0,p.Bs)(a)){for(var s=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:k,i=[],u=[],o=[],x=[],h=new c.A(a);h.remainingSize()>0;){var b;b=3===s?h.readUint32():2===s?h.readUint24():1===s?h.readUint16():h.readUint8();var v=a.subarray(0|Number(0xffffffffn&h.getPos()),(0|Number(0xffffffffn&h.getPos()))+b);h.skip(b);var g=31&v[0];7===g?i.push(v):8===g?u.push(v):13===g?o.push(v):x.push(v)}if(i.length||u.length){var U=m(i,u,o),A=(0,l.sY)(U.length);(0,f.lW)(A,U.length,U),(0,d.Ow)(e,1,A,U.length)}}}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&n.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,p.Bs)(r)){var s=(0,p.py)(r);if(s.length>1){var i=[],c=[],u=[];if(s.forEach((function(e){var t=31&e[0];7===t?i.push(e):8===t?c.push(e):13===t&&u.push(e)})),i.length&&c.length){var o=m(i,c,u),x=(0,l.sY)(o.length);(0,f.lW)(x,o.length,o),(0,d.Ow)(e,1,x,o.length),a.M[15](e+36,1|n.f[15](e+36))}}}}}function U(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[4];var r=function(e){var t=new c.A(e);t.skip(5);for(var r=[],n=[],a=[],s=31&t.readUint8(),i=0;i<s;i++){var u=t.readUint16();r.push(t.readBuffer(u))}for(var o=t.readUint8(),f=0;f<o;f++){var d=t.readUint16();n.push(t.readBuffer(d))}if(t.remainingSize()>4){t.skip(3);var p=t.readUint8();if(p>0)for(var l=0;l<p;l++){var x=t.readUint16();a.push(t.readBuffer(x))}}return{spss:r,ppss:n,spsExts:a}}(t).spss;if(r.length){var n=A(r[0]),a=n.profile,s=n.level,i=n.width,u=n.height;e.codecpar.profile=a,e.codecpar.level=s,e.codecpar.width=i,e.codecpar.height=u}}}function A(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=(0,p.BN)(e.subarray(t)),n=new u.A(r.length);n.appendBuffer(r),n.readU1(),n.readU(2),n.readU(5);var a=n.readU(8);n.readU1(),n.readU1(),n.readU1(),n.readU1(),n.readU1(),n.readU1(),n.readU(2);var s=n.readU(8);x.xb(n);var i=1,c=0,o=0;if((100==a||110==a||122==a||244==a||44==a||83==a||86==a||118==a||128==a||138==a||139==a||134==a||135==a)&&(3===(i=x.xb(n))&&n.readU1(),c=x.xb(n),o=x.xb(n),n.readU1(),n.readU1()))for(var f=new Array(8),d=0;d<(3!=i?8:12);d++)f[d]=n.readU1();x.xb(n);var l=x.xb(n);if(0===l)x.xb(n);else if(1===l){n.readU1(),x.$x(n),x.$x(n);for(var h=x.xb(n),k=0;k<h;k++)x.$x(n)}x.xb(n),n.readU1();var m=x.xb(n),b=x.xb(n),v=n.readU1(),g=16*(m+1),U=(2-v)*(b+1)*16;v||n.readU1(),n.readU1();var A=n.readU1();if(A){var z=1,w=2-A;1===i?(z=2,w=2*(2-A)):2===A&&(z=2,w=2-A),g-=z*(x.xb(n)+x.xb(n)),U-=w*(x.xb(n)+x.xb(n))}return{profile:a,level:s,width:g,height:U,chromaFormatIdc:i,bitDepthLumaMinus8:c,bitDepthChromaMinus8:o}}}},53e3:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>m,XC:()=>v,ci:()=>b,oT:()=>k});var n=r(63939),a=r(50932),s=r(72739),i=r(729),c=r(31865),u=r(37246),o=r(14686),f=r(60264),d=r(71517),p=r(37837),l=r(23991),x=3;function h(e,t,r){var n=t[0],a=23;e.length&&(a+=3,a=e.reduce((function(e,t){return e+2+t.length}),a)),t.length&&(a+=3,a=t.reduce((function(e,t){return e+2+t.length}),a)),r.length&&(a+=3,a=r.reduce((function(e,t){return e+2+t.length}),a));var c=new Uint8Array(a),u=new i.A(c,!0),o=g(n);u.writeUint8(1),u.writeUint8(n[1]),u.writeUint8(n[2]),u.writeUint8(n[3]),u.writeUint8(n[4]),u.writeUint8(n[5]),u.writeUint8(n[6]),u.writeUint8(n[7]),u.writeUint8(n[8]),u.writeUint8(n[9]),u.writeUint8(n[10]),u.writeUint8(n[11]),u.writeUint8(o.level),u.writeUint8(1020),u.writeUint8(0),u.writeUint8(16320),u.writeUint8(16320|o.chromaFormatIdc),u.writeUint8(8160|o.bitDepthLumaMinus8),u.writeUint8(8160|o.bitDepthChromaMinus8),u.writeUint16(0),u.writeUint8(8|(1&n[0])<<2|x);var f=0;return e.length&&f++,t.length&&f++,r.length&&f++,u.writeUint8(f),e.length&&(u.writeUint8(160),u.writeUint16(e.length),s.__(e,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),t.length&&(u.writeUint8(161),u.writeUint16(t.length),s.__(t,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),r.length&&(u.writeUint8(162),u.writeUint16(r.length),s.__(r,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),c}function k(e){var t,r=!1,n=(0,f.py)(e);if(n.length>2){var a=[],c=[],u=[];n.forEach((function(e){var t=e[0]>>>1&63;32===t?a.push(e):33===t?c.push(e):34===t&&u.push(e)})),a.length&&c.length&&u.length&&(t=h(a,c,u),n=n.filter((function(e){var t=e[0]>>>1&63;return 32!==t&&33!==t&&34!==t&&35!==t})))}var d=n.reduce((function(e,t){return e+x+1+t.length}),0),l=(0,p.sY)(d),k=(0,o.s3)(l,d),m=new i.A(k);return s.__(n,(function(e){3===x?m.writeUint32(e.length):2===x?m.writeUint24(e.length):1===x?m.writeUint16(e.length):m.writeUint8(e.length),m.writeBuffer(e.subarray(0));var t=e[0]>>>1&63;19!==t&&20!==t&&21!==t||(r=!0)})),{bufferPointer:l,length:d,extradata:t,key:r}}function m(e,t){var r;if(1&n.f[15](e+36)){var a=(0,d.iI)(e);if(!(0,f.Bs)(a)){for(var s=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:x,i=[],u=[],l=[],k=new c.A(a);k.remainingSize()>0;){var m;m=3===s?k.readUint32():2===s?k.readUint24():1===s?k.readUint16():k.readUint8();var b=a.subarray(0|Number(0xffffffffn&k.getPos()),(0|Number(0xffffffffn&k.getPos()))+m);k.skip(m);var v=b[0]>>>1&63;33===v?u.push(b):34===v?l.push(b):32===v&&i.push(b)}if(u.length||l.length||i.length){var g=h(i,u,l),U=(0,p.sY)(g.length);(0,o.lW)(U,g.length,g),(0,d.Ow)(e,1,U,g.length)}}}}function b(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&n.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,f.Bs)(r)){var s=(0,f.py)(r);if(s.length>2){var i=[],c=[],u=[];if(s.forEach((function(e){var t=e[0]>>>1&63;32===t?i.push(e):33===t?c.push(e):34===t&&u.push(e)})),i.length&&c.length&&u.length){var l=h(i,c,u),x=(0,p.sY)(l.length);(0,o.lW)(x,l.length,l),(0,d.Ow)(e,1,x,l.length),a.M[15](e+36,1|n.f[15](e+36))}}}}}function v(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[21];var r=function(e){var t=new c.A(e,!0);t.skip(22);for(var r=[],n=[],a=[],s=t.readUint8(),i=0;i<s;i++){for(var u=63&t.readUint8(),o=t.readUint16(),f=[],d=0;d<o;d++){var p=t.readUint16();f.push(t.readBuffer(p))}32===u?r=f:33===u?n=f:34===u&&(a=f)}return{vpss:r,spss:n,ppss:a}}(t).spss;if(r.length){var n=g(r[0]),a=n.profile,s=n.level,i=n.width,u=n.height;e.codecpar.profile=a,e.codecpar.level=s,e.codecpar.width=i,e.codecpar.height=u}}}function g(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=0,n=0,a=0,s=0,i=0,c=0,o=1,d=0,p=0,x=0,h=0,k=(0,f.BN)(e.subarray(t)),m=new u.A(k.length);m.appendBuffer(k),m.readU1(),m.readU(6),m.readU(6),m.readU(3),m.readU(4);var b=m.readU(3);if(m.readU1(),b<=6){d=m.readU(2),p=m.readU1(),r=m.readU(5),x=m.readU(32),h=m.readU(48),n=m.readU(8);for(var v=new Array(6),g=new Array(6),U=0;U<b;U++)v[U]=m.readU1(),g[U]=m.readU1();if(b>0)for(var A=b;A<8;A++)m.readU(2);for(var z=0;z<b;z++)v[z]&&(m.readU(2),m.readU(1),m.readU(5),m.readU(32),m.readU(1),m.readU(1),m.readU(1),m.readU(1),m.readU(44)),g[z]&&m.readU(8);l.xb(m),3===(o=l.xb(m))&&m.readU(1),a=l.xb(m),s=l.xb(m);var w=0,y=0,I=0,P=0;m.readU1()&&(w=l.xb(m),y=l.xb(m),I=l.xb(m),P=l.xb(m)),i=l.xb(m),c=l.xb(m);var B=2,S=2;0===o?B=S=0:2===o?(B=2,S=1):3===o&&(B=S=1),a-=B*(1<<i+1)*(w+y),s-=S*(1<<i+1)*(I+P)}return{profile:r,level:n,width:a,height:s,chromaFormatIdc:o,bitDepthLumaMinus8:i,bitDepthChromaMinus8:c,generalProfileSpace:d,generalTierFlag:p,generalProfileCompatibilityFlag:x,constraintFlags:h}}}},65451:(e,t,r)=>{"use strict";r.d(t,{Ij:()=>o,XC:()=>u,kt:()=>c});var n=r(31865),a=r(729),s=r(44328),i=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function c(e){var t,r,n=0;if(e.length<1)return 0;switch(t=e[0],r=i[t>>3],3&t){case 0:n=1;break;case 1:case 2:n=2;break;case 3:if(e.length<2)return 0;n=63&e[1]}return n*r}function u(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=19){var r=new n.A(t,!1);r.skip(9),e.codecpar.chLayout.nbChannels=r.readUint8(),e.codecpar.channels=e.codecpar.chLayout.nbChannels,e.codecpar.initialPadding=r.readUint16(),e.codecpar.sampleRate=r.readUint32(),e.codecpar.seekPreroll=Number((0,s.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function o(e){var t=new Uint8Array(19),r=new a.A(t,!1);return r.writeString("OpusHead"),r.writeUint8(1),r.writeUint8(e.chLayout.nbChannels),r.writeUint16(e.initialPadding),r.writeUint32(e.sampleRate),t}},58919:(e,t,r)=>{"use strict";r.d(t,{U:()=>s,X:()=>a});var n=r(37246);function a(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){var r=s(t);e.codecpar.profile=r.profile,e.codecpar.level=r.level}}function s(e){var t=new n.A(e.length);return t.appendBuffer(e.subarray(4)),{profile:t.readU(8),level:t.readU(8),bitDepth:t.readU(4),chromaSubsampling:t.readU(3),fullRangeFlag:t.readU1(),colorPrimaries:t.readU(8),colorTrc:t.readU(8),colorSpace:t.readU(8)}}},85947:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(78716),a=r(81570),s=r(134),i=function(){function e(){(0,n.A)(this,e),(0,s.A)(this,"type",-1),(0,s.A)(this,"onStreamAdd",void 0)}return(0,a.A)(e,[{key:"destroy",value:function(e){}}]),e}()},92047:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var n=r(88435),a=r.n(n),s=r(25182),i=r(78716),c=r(81570),u=r(77193),o=r(25767),f=r(43070),d=r(31060),p=r(134),l=r(36443),x=r.n(l),h=r(63939),k=r(50932),m=r(4624),b=r(9705),v=r(65977),g=r(74963),U=r(85947),A=r(85428),z=r(9690),w=r(72739),y=r(14686),I=r(37837),P=r(71517),B=r(44328),S=r(77231);function M(e,t,r){return t=(0,o.A)(t),(0,u.A)(e,D()?a()(t,r||[],(0,o.A)(e).constructor):t.apply(e,r))}function D(){try{var e=!Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}var N="src/avformat/formats/IMovFormat.ts",C=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.A)(this,t),e=M(this,t),(0,p.A)((0,f.A)(e),"type",1),(0,p.A)((0,f.A)(e),"context",void 0),(0,p.A)((0,f.A)(e),"options",void 0),e.options=r,e.context=(0,z.A)(),e}var r,n,a,u;return(0,d.A)(t,e),(0,c.A)(t,[{key:"init",value:function(e){e.ioReader&&e.ioReader.setEndian(!0)}},{key:"readHeader",value:(u=(0,s.A)(x().mark((function e(t){var r,n,a,s,i,c,u,o,f,d,p;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=0,e.next=4,t.ioReader.readUint32();case 4:return n=e.sent,e.next=7,t.ioReader.readUint32();case 7:if((a=e.sent)===(0,v.A)("ftyp")){e.next=11;break}return m.z3("the file format is not mp4",N,82),e.abrupt("return",b.LR);case 11:return e.next=13,g.E6(t.ioReader,this.context,{type:a,size:n-8});case 13:s=BigInt(0);case 14:if(this.context.foundMoov){e.next=42;break}return i=t.ioReader.getPos(),e.next=18,t.ioReader.readUint32();case 18:return n=e.sent,e.next=21,t.ioReader.readUint32();case 21:if(a=e.sent,!(n<8)){e.next=25;break}return m.z3("invalid box size ".concat(n),N,99),e.abrupt("return",b.LR);case 25:if(a!==(0,v.A)("mdat")){e.next=32;break}return this.context.foundMdat||(s=i),this.context.foundMdat=!0,e.next=30,t.ioReader.seek(i+BigInt(Math.floor(n)));case 30:e.next=40;break;case 32:if(a!==(0,v.A)("moov")){e.next=38;break}return e.next=35,g.wB(t.ioReader,t,this.context,{size:n-8,type:a});case 35:this.context.foundMoov=!0,e.next=40;break;case 38:return e.next=40,t.ioReader.seek(i+BigInt(Math.floor(n)));case 40:e.next=14;break;case 42:if(this.context.fragment||this.context.foundMdat){e.next=49;break}return e.next=45,t.ioReader.peekUint64();case 45:e.t0=e.sent,e.t1=BigInt(32),c=e.t0>>e.t1,Number(c)===(0,v.A)("moof")&&(this.context.fragment=!0);case 49:if(!(this.context.fragment&&1&t.ioReader.flags)){e.next=79;break}return u=t.ioReader.getPos(),e.next=53,t.ioReader.fileSize();case 53:if(!((o=e.sent)>BigInt(16))){e.next=79;break}return e.next=57,t.ioReader.seek(o-BigInt(12));case 57:return e.next=59,t.ioReader.readUint32();case 59:if((f=e.sent)!==(0,v.A)("mfro")){e.next=77;break}return e.next=63,t.ioReader.skip(4);case 63:return e.next=65,t.ioReader.readUint32();case 65:return d=e.sent,e.next=68,t.ioReader.seek(o-BigInt(Math.floor(d)));case 68:return e.next=70,t.ioReader.readUint32();case 70:return p=e.sent,e.next=73,t.ioReader.readUint32();case 73:if((f=e.sent)!==(0,v.A)("mfra")){e.next=77;break}return e.next=77,g.t9(t.ioReader,t,this.context,{size:p-8,type:f});case 77:return e.next=79,t.ioReader.seek(u);case 79:if(this.context.fragment||!this.context.foundMdat){e.next=82;break}return e.next=82,t.ioReader.seek(s);case 82:return e.abrupt("return",r);case 85:return e.prev=85,e.t2=e.catch(0),m.z3(e.t2.message,N,161),this.context.foundMoov||m.z3("moov not found",N,164),e.abrupt("return",t.ioReader.error);case 90:case"end":return e.stop()}}),e,this,[[0,85]])}))),function(e){return u.apply(this,arguments)})},{key:"readAVPacket_",value:(a=(0,s.A)(x().mark((function e(t,r){var n,a,s,i,c,u,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,A.G)(t,this.context),a=n.sample,s=n.stream,!a){e.next=22;break}return k.M[15](r+32,s.index),k.M[17](r+16,a.dts),k.M[17](r+8,a.pts),k.M[17](r+48,BigInt(Math.floor(a.duration))),k.M[15](r+36,h.f[15](r+36)|a.flags),k.M[17](r+56,a.pos),k.M[15](r+76,s.timeBase.den),k.M[15](r+72,s.timeBase.num),s.startTime===S.Dh&&(s.startTime=h.f[17](r+8)||h.f[17](r+16)),e.next=13,t.ioReader.seek(h.f[17](r+56));case 13:return i=a.size,c=(0,I.sY)(i),(0,P.NX)(r,c,i),e.next=18,t.ioReader.readBuffer(i,(0,y.JW)(c,i));case 18:27!==s.codecpar.codecId&&173!==s.codecpar.codecId||k.M[15](r+80,1),s.sideData[1]&&(u=s.sideData[1].length,o=(0,I.sY)(u),(0,P.Ow)(r,1,o,u),(0,y.lW)(o,u,s.sideData[1]),delete s.sideData[1]),e.next=23;break;case 22:return e.abrupt("return",-1048576);case 23:return e.abrupt("return",0);case 24:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"readAVPacket",value:(n=(0,s.A)(x().mark((function e(t,r){var n,a,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.context.fragment||this.context.currentFragment){e.next=25;break}case 2:if(this.context.currentFragment){e.next=25;break}return n=t.ioReader.getPos(),e.next=6,t.ioReader.readUint32();case 6:return a=e.sent,e.next=9,t.ioReader.readUint32();case 9:if((s=e.sent)!==(0,v.A)("moof")){e.next=16;break}return this.context.currentFragment={pos:n,size:a,sequence:0,tracks:[],currentTrack:null},e.next=14,g.wZ(t.ioReader,t,this.context,{type:s,size:a-8});case 14:e.next=23;break;case 16:if(s!==(0,v.A)("moov")){e.next=21;break}return e.next=19,g.wB(t.ioReader,t,this.context,{size:a-8,type:s});case 19:e.next=23;break;case 21:return e.next=23,t.ioReader.skip(a-8);case 23:e.next=2;break;case 25:return e.next=27,this.readAVPacket_(t,r);case 27:return e.abrupt("return",e.sent);case 30:return e.prev=30,e.t0=e.catch(0),-1048576!==t.ioReader.error&&m.z3(e.t0.message,N,261),e.abrupt("return",t.ioReader.error);case 34:case"end":return e.stop()}}),e,this,[[0,30]])}))),function(e,t){return n.apply(this,arguments)})},{key:"seek",value:(r=(0,s.A)(x().mark((function e(t,r,n,a){var s,i,c,u,o,f;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n,i=r.privData,!(16&a&&this.context.fragment)){e.next=8;break}return c=(0,B.k)(n,r.timeBase,S.i0),e.next=6,t.ioReader.seek(c,!0);case 6:return this.context.currentFragment=null,e.abrupt("return",BigInt(0));case 8:if(!this.context.fragment){e.next=17;break}if(!i.fragIndexes.length){e.next=16;break}if(!((u=w.El(i.fragIndexes,(function(e){return e.time>s?-1:e.time===s?0:1})))>-1)){e.next=16;break}return e.next=14,t.ioReader.seek(i.fragIndexes[u].pos,!0);case 14:return this.context.currentFragment=null,e.abrupt("return",BigInt(0));case 16:return e.abrupt("return",BigInt(b.E$));case 17:if(!((o=w.El(i.samplesIndex,(function(e){return e.pts>s?-1:e.pts===s?0:1})))>-1&&0===r.codecpar.codecType)){e.next=28;break}f=o;case 20:if(!(f>=0)){e.next=27;break}if(!(1&i.samplesIndex[f].flags)){e.next=24;break}return o=f,e.abrupt("break",27);case 24:f--,e.next=20;break;case 27:f<0&&(o=-1);case 28:if(!(o>-1)){e.next=33;break}return i.currentSample=o,i.sampleEnd=!1,w.__(t.streams,(function(e){if(e!==r){var t=e.privData,n=!1,a=(0,B.k)(i.samplesIndex[i.currentSample].pts,r.timeBase,e.timeBase);w.__(t.samplesIndex,(function(e,r){if(e.pts>=a)return t.currentSample=r,n=!0,!1})),n?t.sampleEnd=!1:(t.sampleEnd=!0,t.currentSample=t.samplesIndex.length)}})),e.abrupt("return",BigInt(0));case 33:return e.abrupt("return",BigInt(b.LR));case 34:case"end":return e.stop()}}),e,this)}))),function(e,t,n,a){return r.apply(this,arguments)})},{key:"getAnalyzeStreamsCount",value:function(){return 0}}]),t}(U.A)},21071:(e,t,r)=>{"use strict";r.d(t,{_l:()=>n,gQ:()=>a});var n=["hmhd","nmhd","iods","xml ","url ","bxml","ipro","mere","stts","ctts","stss","stsz","stz2","stsc","stco","co64","stsd","dref","mvhd","tkhd","mdhd","hdlr"],a=["moov","trak","edts","mdia","minf","dinf","stbl","mvex","moof","traf","vttc","tref","iref","mfra","hnti","hinf","strd","sinf","rinf","schi","trgr","udta","iprp","ipco","strk","meco"]},61179:(e,t,r)=>{"use strict";function n(e,t,r){var n=e.privData,a=r.trexs.find((function(e){return e.trackId===t.trackId})),s=t.baseDataOffset+BigInt(Math.floor(t.dataOffset));t.baseIsMoof&&(s+=r.currentFragment.pos);var i=t.baseMediaDecodeTime,c=t.sampleSizes,u=t.sampleDurations,o=t.sampleFlags,f=t.sampleCompositionTimeOffset;if(!c.length)for(var d=0;d<t.sampleCount;d++)c.push(t.defaultSampleSize||a.size);if(!u.length)for(var p=0;p<t.sampleCount;p++)u.push(t.defaultSampleDuration||a.duration);if(!o.length)for(var l=0;l<t.sampleCount;l++)o.push(t.defaultSampleFlags||a.flags);if(!f.length)for(var x=0;x<t.sampleCount;x++)f.push(0);for(var h=[],k=0;k<t.sampleCount;k++){var m={dts:i,pts:i+BigInt(Math.floor(f[k])),pos:s,size:c[k],duration:u[k],flags:0};i+=BigInt(Math.floor(m.duration)),s+=BigInt(Math.floor(m.size));var b=o[k];0===k&&t.firstSampleFlags&&(b=t.firstSampleFlags),16842752&b||(m.flags|=1),h.push(m)}n.samplesIndex=h}r.d(t,{p:()=>n})},98859:(e,t,r)=>{"use strict";function n(e){var t=e.privData,r=t.chunkOffsets,n=t.sampleSizes,a=t.cttsSampleCounts,s=t.cttsSampleOffsets,i=t.stscFirstChunk,c=t.stscSamplesPerChunk,u=t.stssSampleNumbersMap,o=t.sttsSampleCounts,f=t.sttsSampleDeltas;if(r.length){for(var d=0,p=0,l=0,x=0,h=0,k=0,m=BigInt(0),b=0,v=BigInt(0),g=[],U=0;U<r.length;U++)for(m=r[U],d<i.length-1&&i[d+1]===U+1&&d++,k=c[d];k>0;){var A={dts:v,pts:v,pos:m,size:n[b],duration:0,flags:0};(u&&u.has(b+1)||1===e.codecpar.codecType)&&(A.flags|=1),s&&(A.pts=A.dts+BigInt(Math.floor(s[x])),++h===a[x]&&(x++,h=0)),b&&(g[b-1].duration=Number(A.dts-g[b-1].dts)),m+=BigInt(Math.floor(A.size)),v+=BigInt(Math.floor(f[p])),++l===o[p]&&(p++,l=0),b++,g.push(A),k--}g[b-1].duration=g[b-2].duration,t.samplesIndex=g}}r.d(t,{X:()=>n})},3384:(e,t,r)=>{"use strict";function n(){return{trackId:0,baseDataOffset:BigInt(0),defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0,baseMediaDecodeTime:BigInt(0),sampleCount:0,dataOffset:0,dataOffsetPos:BigInt(0),firstSampleFlags:0,sampleDurations:[],sampleSizes:[],sampleFlags:[],sampleCompositionTimeOffset:[],baseIsMoof:!1,ioWriter:null,buffers:[]}}r.d(t,{A:()=>n})},9690:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(77231);function a(){return{isom:!1,timescale:n.N_,duration:n.Dh,foundMoov:!1,foundMdat:!1,majorBrand:0,minorVersion:0,compatibleBrand:[],creationTime:BigInt(0),modificationTime:BigInt(0),rate:n.N_,volume:n.N_,matrix:null,nextTrackId:1,fragment:!1,trexs:[],currentFragment:null,boxsPositionInfo:[],holdMoovPos:BigInt(0),currentChunk:null}}},38106:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(77231);function a(){return{chunkOffsets:null,cttsSampleCounts:null,cttsSampleOffsets:null,stscFirstChunk:null,stscSamplesPerChunk:null,stscSampleDescriptionIndex:null,stssSampleNumbersMap:null,stssSampleNumbers:null,sampleSizes:null,sttsSampleCounts:null,sttsSampleDeltas:null,timescale:0,duration:BigInt(0),trackId:n.N_,layer:0,alternateGroup:0,volume:0,matrix:null,width:0,height:0,audioCid:0,samplesPerFrame:0,bytesPerFrame:0,currentSample:0,sampleEnd:!1,samplesIndex:[],fragIndexes:[],lastPts:BigInt(0),lastDts:BigInt(0),startDts:BigInt(0),startCT:0,lastDuration:0,chunkCount:0,firstWrote:!1,lastStscCount:0,perStreamGrouping:!1,index:0,flags:0}}},85428:(e,t,r)=>{"use strict";r.d(t,{G:()=>s});var n=r(77231),a=r(44328);function s(e,t){var r,s,i,c,u,o,f=BigInt(0);if(e.streams.forEach((function(e){var t=e.privData;if(!t.samplesIndex||!t.samplesIndex.length)return t.sampleEnd=!0,!0;t.sampleEnd||i&&!(t.samplesIndex[t.currentSample].pos<i.pos)||(i=t.samplesIndex[t.currentSample],c=e),t.sampleEnd||u&&!((0,a.k)(t.samplesIndex[t.currentSample].dts,e.timeBase,n.KR)<f)||(u=t.samplesIndex[t.currentSample],f=(0,a.k)(u.dts,e.timeBase,n.KR),o=e)})),i&&u){var d=(0,a.k)(i.dts,c.timeBase,n.KR),p=(0,a.k)(u.dts,o.timeBase,n.KR);Math.abs(Number(d-p))<1e6||2&e.ioReader.flags?(r=i,s=c):(r=u,s=o)}else i?(r=i,s=c):u&&(r=u,s=o);if(s&&(s.privData.currentSample++,s.privData.currentSample>=s.privData.samplesIndex.length&&(s.privData.sampleEnd=!0)),t.fragment){var l=!!e.streams.find((function(e){return!1===e.privData.sampleEnd}));l||(t.currentFragment=null)}return{sample:r,stream:s}}},74963:(e,t,r)=>{"use strict";r.d(t,{E6:()=>b,t9:()=>I,wB:()=>A,wZ:()=>w});var n=r(25182),a=r(36443),s=r.n(a),i=r(65977),c=r(21071),u=r(68361),o=r(4624),f=r(61179),d=r(98859),p=r(3384),l=r(38106),x=r(37837),h=r(14686),k=r(77231),m="src/avformat/formats/mov/imov.ts";function b(e,t,r){return v.apply(this,arguments)}function v(){return(v=(0,n.A)(s().mark((function e(t,r,n){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getPos()+BigInt(Math.floor(n.size)),e.next=3,t.readUint32();case 3:return r.majorBrand=e.sent,e.next=6,t.readUint32();case 6:r.minorVersion=e.sent,r.majorBrand===(0,i.A)("qt  ")&&(r.isom=!0);case 8:if(!(t.getPos()<a)){e.next=16;break}return e.t0=r.compatibleBrand,e.next=12,t.readUint32();case 12:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=8;break;case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,r,n){return U.apply(this,arguments)}function U(){return(U=(0,n.A)(s().mark((function e(t,r,n,a){var f,d,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=t.getPos()+BigInt(Math.floor(n.size)),d=s().mark((function e(){var n,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readUint32();case 2:return n=e.sent,e.next=5,t.readUint32();case 5:if(f=e.sent,!(n<8)){e.next=9;break}return o.z3("invalid box size ".concat(n),m,76),e.abrupt("return",{v:void 0});case 9:if(!u.A[f]){e.next=14;break}return e.next=12,u.A[f](t,r,{type:f,size:n-8},a);case 12:case 17:e.next=21;break;case 14:if(!c.gQ.some((function(e){return(0,i.A)(e)===f}))){e.next=19;break}return e.next=17,g(t,r,{type:f,size:n-8},a);case 19:return e.next=21,t.skip(n-8);case 21:case"end":return e.stop()}}),e)}));case 2:if(!(t.getPos()<f)){e.next=9;break}return e.delegateYield(d(),"t0",4);case 4:if(!(p=e.t0)){e.next=7;break}return e.abrupt("return",p.v);case 7:e.next=2;break;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,r,n){return z.apply(this,arguments)}function z(){return(z=(0,n.A)(s().mark((function e(t,r,n,a){var c,f,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.getPos()+BigInt(Math.floor(a.size)),f=s().mark((function e(){var a,c,f,p,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readUint32();case 2:return a=e.sent,e.next=5,t.readUint32();case 5:if(c=e.sent,!(a<8)){e.next=9;break}return o.z3("invalid box, type: ".concat(c,", size ").concat(a),m,124),e.abrupt("return",{v:void 0});case 9:if(!u.A[c]){e.next=14;break}return e.next=12,u.A[c](t,null,{type:c,size:a-8},n);case 12:case 25:case 31:e.next=35;break;case 14:if(c!==(0,i.A)("trak")){e.next=27;break}if(n.foundMoov&&!n.fragment){e.next=23;break}return(f=r.createStream()).privData=(0,l.A)(),e.next=20,g(t,f,{type:c,size:a-8},n);case 20:n.fragment?(p=f.privData,(b=r.streams.find((function(e){var t=e.privData;if(e.index!==f.index&&t.trackId===p.trackId)return!0})))?(f.sideData[1]&&(b.sideData[1]=f.sideData[1],b.codecpar.extradata&&(0,x.Eb)(b.codecpar.extradata),b.codecpar.extradataSize=b.sideData[1].length,b.codecpar.extradata=(0,x.sY)(b.codecpar.extradataSize),(0,h.lW)(b.codecpar.extradata,b.codecpar.extradataSize,b.sideData[1]),f.codecpar.width===k.N_&&p.width>0&&(b.codecpar.width=p.width),f.codecpar.width===k.N_&&p.height>0&&(b.codecpar.height=p.height)),r.removeStream(f),r.streamIndex--):(f.codecpar.width===k.N_&&p.width>0&&(f.codecpar.width=p.width),f.codecpar.width===k.N_&&p.height>0&&(f.codecpar.height=p.height))):(0,d.X)(f),e.next=25;break;case 23:return e.next=25,t.skip(a-8);case 27:if(c!==(0,i.A)("mvex")){e.next=33;break}return n.fragment=!0,e.next=31,g(t,null,{type:c,size:a-8},n);case 33:return e.next=35,t.skip(a-8);case 35:case"end":return e.stop()}}),e)}));case 2:if(!(t.getPos()<c)){e.next=9;break}return e.delegateYield(f(),"t0",4);case 4:if(!(p=e.t0)){e.next=7;break}return e.abrupt("return",p.v);case 7:e.next=2;break;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,r,n){return y.apply(this,arguments)}function y(){return(y=(0,n.A)(s().mark((function e(t,r,n,a){var c,d,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.getPos()+BigInt(Math.floor(a.size)),d=s().mark((function e(){var a,c,d,l,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readUint32();case 2:return a=e.sent,e.next=5,t.readUint32();case 5:if(c=e.sent,!(a<8)){e.next=9;break}return o.z3("invalid box, type: ".concat(c,", size ").concat(a),m,229),e.abrupt("return",{v:void 0});case 9:if(!u.A[c]){e.next=14;break}return e.next=12,u.A[c](t,null,{type:c,size:a-8},n);case 12:e.next=27;break;case 14:if(c!==(0,i.A)("traf")){e.next=25;break}return d=(0,p.A)(),n.currentFragment.currentTrack=d,e.next=19,g(t,null,{type:c,size:a-8},n);case 19:n.currentFragment.tracks.push(d),n.currentFragment.currentTrack=null,(l=r.streams.find((function(e){return e.privData.trackId===d.trackId})))&&(x=l.privData,d.streamIndex=l.index,(0,f.p)(l,d,n),x.currentSample=0,x.sampleEnd=!1),e.next=27;break;case 25:return e.next=27,t.skip(a-8);case 27:case"end":return e.stop()}}),e)}));case 2:if(!(t.getPos()<c)){e.next=9;break}return e.delegateYield(d(),"t0",4);case 4:if(!(l=e.t0)){e.next=7;break}return e.abrupt("return",l.v);case 7:e.next=2;break;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,r,n){return P.apply(this,arguments)}function P(){return(P=(0,n.A)(s().mark((function e(t,r,n,a){var c,u,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.getPos()+BigInt(Math.floor(a.size)),u=s().mark((function e(){var a,c,u,f,d,p,l,x,h,k,b,v,g,U,A,z,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fileSize();case 2:return a=e.sent,e.next=5,t.readUint32();case 5:return c=e.sent,e.next=8,t.readUint32();case 8:if(e.sent===(0,i.A)("tfra")){e.next=12;break}return o.z3("invalid tfra box data",m,293),e.abrupt("return",{v:void 0});case 12:return e.next=14,t.readUint8();case 14:return u=e.sent,e.next=17,t.skip(3);case 17:return e.next=19,t.readUint32();case 19:return f=e.sent,e.next=22,t.readUint32();case 22:return d=e.sent,e.next=25,t.readUint32();case 25:if(p=e.sent,!(l=r.streams.find((function(e){return e.privData.trackId===f})))){e.next=93;break}x=l.privData,b=0;case 30:if(!(b<p)){e.next=79;break}if(1!==u){e.next=40;break}return e.next=34,t.readUint64();case 34:return h=e.sent,e.next=37,t.readUint64();case 37:k=e.sent,e.next=54;break;case 40:return e.t0=BigInt,e.t1=Math,e.next=44,t.readUint32();case 44:return e.t2=e.sent,e.t3=e.t1.floor.call(e.t1,e.t2),h=(0,e.t0)(e.t3),e.t4=BigInt,e.t5=Math,e.next=51,t.readUint32();case 51:e.t6=e.sent,e.t7=e.t5.floor.call(e.t5,e.t6),k=(0,e.t4)(e.t7);case 54:x.fragIndexes.push({pos:k,time:h}),v=0;case 56:if(!(v<1+(d>>4&3))){e.next=62;break}return e.next=59,t.skip(1);case 59:v++,e.next=56;break;case 62:g=0;case 63:if(!(g<1+(d>>2&3))){e.next=69;break}return e.next=66,t.skip(1);case 66:g++,e.next=63;break;case 69:U=0;case 70:if(!(U<1+(3&d))){e.next=76;break}return e.next=73,t.skip(1);case 73:U++,e.next=70;break;case 76:b++,e.next=30;break;case 79:if(!x.fragIndexes.length){e.next=93;break}return e.next=82,t.seek(x.fragIndexes[x.fragIndexes.length-1].pos);case 82:return e.next=84,t.readUint32();case 84:return A=e.sent,e.next=87,t.readUint32();case 87:if((z=e.sent)!==(0,i.A)("moof")){e.next=93;break}return n.currentFragment={pos:BigInt(0),size:A,sequence:0,tracks:[],currentTrack:null},e.next=92,w(t,r,n,{size:A,type:z});case 92:x.samplesIndex.length&&(y=x.samplesIndex[x.samplesIndex.length-1],l.duration=y.pts+BigInt(Math.floor(y.duration)));case 93:return e.next=95,t.seek(a+BigInt(Math.floor(c)),!1,!1);case 95:case"end":return e.stop()}}),e)}));case 2:if(!(t.getPos()<c)){e.next=9;break}return e.delegateYield(u(),"t0",4);case 4:if(!(f=e.t0)){e.next=7;break}return e.abrupt("return",f.v);case 7:e.next=2;break;case 9:n.currentFragment=null;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6660:(e,t,r)=>{"use strict";r.d(t,{Q9:()=>c,f3:()=>u,uf:()=>o,zs:()=>i});var n,a=r(134),s=r(65977),i=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},86018,64),86017,105),86076,173),86028,193),86021,221),12,32),27,33),173,35),167,177),0,0),c={32:12,33:27,35:173,177:167,64:86018,102:86018,103:86018,104:86018,105:86017,107:86017,173:86076,193:86028,221:86021,0:0},u={vide:0,soun:1,clcp:3,sbtl:3,subt:3,subp:3,text:3},o=(n={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(n,(0,s.A)("mp4a"),86018),1836253269,86017),(0,s.A)("Opus"),86076),(0,s.A)("fLaC"),86028),(0,s.A)("spex"),86051),(0,s.A)("SPXN"),86051),(0,s.A)("ac-3"),86019),(0,s.A)("sac3"),86019),s.A.mp4v,12),(0,s.A)("av01"),226),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(n,(0,s.A)("vp08"),139),(0,s.A)("vp09"),167),(0,s.A)("avc1"),27),(0,s.A)("hev1"),173),(0,s.A)("hvc1"),173),(0,s.A)("text"),94213),(0,s.A)("tx3g"),94213))},38582:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c=r(14686),u=r(37837),o=r(90412),f="src/avformat/formats/mov/parsing/av1c.ts";function d(e,t,r,n){return p.apply(this,arguments)}function p(){return(p=(0,n.A)(s().mark((function e(t,r,n,a){var d,p,l,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=t.getPos(),r.codecpar.codecId=226,p=(0,u.sY)(n.size),e.next=5,t.readBuffer(n.size,(0,c.JW)(p,n.size));case 5:if(l=e.sent,a.foundMoov?(r.sideData[1]=l.slice(),(0,u.Eb)(p)):(r.codecpar.extradata=p,r.codecpar.extradataSize=n.size,r.sideData[1]=l.slice()),o.XC(r,r.sideData[1]),!((x=n.size-Number(t.getPos()-d))>0)){e.next=14;break}return e.next=12,t.skip(x);case 12:e.next=15;break;case 14:x<0&&i.z3("read avcc error, size: ".concat(n.size,", read: ").concat(n.size-x),f,63);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},73840:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(25182),a=r(36443),s=r.n(a),i=r(37837),c=r(14686),u=r(4624),o=r(20620),f="src/avformat/formats/mov/parsing/avcc.ts";function d(e,t,r,n){return p.apply(this,arguments)}function p(){return(p=(0,n.A)(s().mark((function e(t,r,n,a){var d,p,l,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=t.getPos(),r.codecpar.codecId=27,p=(0,i.sY)(n.size),e.next=5,t.readBuffer(n.size,(0,c.JW)(p,n.size));case 5:if(l=e.sent,a.foundMoov?(r.sideData[1]=l.slice(),(0,i.Eb)(p)):(r.codecpar.extradata=p,r.codecpar.extradataSize=n.size,r.sideData[1]=l.slice()),o.XC(r,r.sideData[1]),!((x=n.size-Number(t.getPos()-d))>0)){e.next=14;break}return e.next=12,t.skip(x);case 12:e.next=15;break;case 14:x<0&&u.z3("read avcc error, size: ".concat(n.size,", read: ").concat(n.size-x),f,63);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},37213:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/co64.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return o=e.sent,t.skip(3),f=[],e.next=8,t.readUint32();case 8:if(d=e.sent,0!==o){e.next=20;break}p=0;case 11:if(!(p<d)){e.next=20;break}return e.t0=f,e.next=15,t.readUint64();case 15:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 17:p++,e.next=11;break;case 20:if(r.privData.chunkOffsets=f,!((l=n.size-Number(t.getPos()-u))>0)){e.next=27;break}return e.next=25,t.skip(l);case 25:e.next=28;break;case 27:l<0&&i.z3("read co64 error, size: ".concat(n.size,", read: ").concat(n.size-l),c,56);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},12869:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/colr.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l,x,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readString(4);case 3:if("nclx"!==(o=e.sent)&&"nclc"!==o&&"prof"!==o){e.next=35;break}if("prof"!==o){e.next=12;break}return e.next=8,t.readBuffer(n.size-4);case 8:f=e.sent,r.sideData[28]=f,e.next=33;break;case 12:return e.next=14,t.readUint16();case 14:return d=e.sent,e.next=17,t.readUint16();case 17:return p=e.sent,e.next=20,t.readUint16();case 20:if(l=e.sent,"nclx"!==o){e.next=27;break}return e.next=24,t.readUint8();case 24:e.t0=e.sent,x=e.t0>>7,r.codecpar.colorRange=x?2:1;case 27:d>=23&&(d=2),p>=19&&(p=2),l>=15&&(l=2),r.codecpar.colorPrimaries=d,r.codecpar.colorTrc=p,r.codecpar.colorSpace=l;case 33:e.next=36;break;case 35:i.R8("unsupported color_parameter_type: ".concat(o),c,79);case 36:if(!((h=n.size-Number(t.getPos()-u))>0)){e.next=42;break}return e.next=40,t.skip(h);case 40:e.next=43;break;case 42:h<0&&i.z3("read vpcc error, size: ".concat(n.size,", read: ").concat(n.size-h),c,87);case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},59299:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/ctts.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),o=r.privData,e.next=4,t.skip(4);case 4:return f=[],d=[],e.next=8,t.readUint32();case 8:p=e.sent,l=0;case 10:if(!(l<p)){e.next=24;break}return e.t0=f,e.next=14,t.readUint32();case 14:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.t2=d,e.next=19,t.readInt32();case 19:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 21:l++,e.next=10;break;case 24:if(o.cttsSampleCounts=f,o.cttsSampleOffsets=d,!((x=n.size-Number(t.getPos()-u))>0)){e.next=32;break}return e.next=30,t.skip(x);case 30:e.next=33;break;case 32:x<0&&i.z3("read ctts error, size: ".concat(n.size,", read: ").concat(n.size-x),c,59);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},86528:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c=r(37837),u=r(14686),o="src/avformat/formats/mov/parsing/dfla.ts";function f(e,t,r,n){return d.apply(this,arguments)}function d(){return(d=(0,n.A)(s().mark((function e(t,r,n,a){var f,d,p,l,x,h,k,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=t.getPos(),r.codecpar.codecId=86028,e.next=4,t.skip(1);case 4:return e.next=6,t.skip(3);case 6:return e.next=8,t.readUint8();case 8:return d=e.sent,p=128&d,l=127&d,e.next=13,t.readUint24();case 13:if(x=e.sent,0!==l||34!==x){e.next=22;break}return h=(0,c.sY)(x),e.next=18,t.readBuffer(x,(0,u.JW)(h,x));case 18:k=e.sent,a.foundMoov?(r.sideData[1]=k.slice(),(0,c.Eb)(h)):(r.codecpar.extradata=h,r.codecpar.extradataSize=x),e.next=23;break;case 22:i.z3("streaminfo must be first FLACMetadataBlock",o,67);case 23:if(p||i.R8("non streaminfo FLACMetadataBlock(s) ignored",o,71),!((m=n.size-Number(t.getPos()-f))>0)){e.next=30;break}return e.next=28,t.skip(m);case 28:e.next=31;break;case 30:m<0&&i.z3("read vpcc error, size: ".concat(n.size,", read: ").concat(n.size-m),o,79);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},41781:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c=r(37837),u=r(14686),o=r(65451),f=r(31865),d=r(729),p="src/avformat/formats/mov/parsing/dops.ts";function l(e,t,r,n){return x.apply(this,arguments)}function x(){return(x=(0,n.A)(s().mark((function e(t,r,n,a){var l,x,h,k,m,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.getPos(),r.codecpar.codecId=86076,e.next=4,t.skip(1);case 4:return x=(0,c.sY)(n.size+8),h=(0,u.JW)(x,n.size+8),k=new f.A(h),(m=new d.A(h,!1)).writeString("OpusHead"),m.writeUint8(1),e.next=12,t.readBuffer(n.size-1,(0,u.JW)(x+9,n.size-1));case 12:if(k.seek(10),m.seek(10),m.writeUint16(k.readUint16()),m.writeUint32(k.readUint32()),m.writeUint16(k.readUint16()),a.foundMoov?(r.sideData[1]=h.slice(),(0,c.Eb)(x)):(r.codecpar.extradata=x,r.codecpar.extradataSize=h.length,o.XC(r,h.slice())),!((b=n.size-Number(t.getPos()-l))>0)){e.next=24;break}return e.next=22,t.skip(b);case 22:e.next=25;break;case 24:b<0&&i.z3("read dops error, size: ".concat(n.size,", read: ").concat(n.size-b),p,81);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},28412:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c=r(6660),u=r(37837),o=r(14686),f=r(58469),d=r(65451),p="src/avformat/formats/mov/parsing/esds.ts";function l(e){return x.apply(this,arguments)}function x(){return(x=(0,n.A)(s().mark((function e(t){var r,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,n=0;case 2:if(!(n<4)){e.next=12;break}return e.next=5,t.readUint8();case 5:if(a=e.sent,r=r<<7|127&a,128&a){e.next=9;break}return e.abrupt("break",12);case 9:n++,e.next=2;break;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,r,n){return k.apply(this,arguments)}function k(){return(k=(0,n.A)(s().mark((function e(t,r,n,a){var x,h,k,m,b,v,g,U;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x=t.getPos(),e.next=3,t.skip(4);case 3:h=t.getPos()+BigInt(Math.floor(n.size-4));case 4:if(!(t.getPos()<h)){e.next=77;break}return e.next=7,t.readUint8();case 7:return k=e.sent,e.next=10,l(t);case 10:if(0!==(m=e.sent)){e.next=16;break}return i.R8("esds invalid descriptor size 0, skip",p,68),e.next=15,t.skip(Number(h-t.getPos()));case 15:return e.abrupt("continue",4);case 16:if(3!==k){e.next=73;break}return b=t.getPos()+BigInt(Math.floor(m)),e.next=20,t.skip(2);case 20:return e.next=22,t.skip(1);case 22:return e.next=24,t.readUint8();case 24:return k=e.sent,e.next=27,l(t);case 27:if(0!==(m=e.sent)){e.next=33;break}return i.R8("esds invalid ES descriptor size 0, skip",p,85),e.next=32,t.skip(Number(b-t.getPos()));case 32:return e.abrupt("continue",4);case 33:if(4!==k){e.next=69;break}return e.next=36,t.readUint8();case 36:return e.t0=e.sent,r.codecpar.codecId=c.Q9[e.t0],e.next=40,t.skip(1);case 40:return e.next=42,t.skip(3);case 42:return e.next=44,t.skip(4);case 44:return e.next=46,t.skip(4);case 46:if(!(t.getPos()<b-BigInt(5))){e.next=65;break}return e.next=49,t.readUint8();case 49:return k=e.sent,e.next=52,l(t);case 52:if(m=e.sent,5!==k){e.next=61;break}return v=(0,u.sY)(m),e.next=57,t.readBuffer(m,(0,o.JW)(v,m));case 57:g=e.sent,a.foundMoov?(r.sideData[1]=g.slice(),(0,u.Eb)(v)):(r.codecpar.extradata=v,r.codecpar.extradataSize=m,86018===r.codecpar.codecId?f.XC(r,g.slice()):86076===r.codecpar.codecId&&d.XC(r,g.slice())),e.next=63;break;case 61:return e.next=63,t.skip(Number(b-t.getPos()));case 63:e.next=67;break;case 65:return e.next=67,t.skip(Number(b-t.getPos()));case 67:e.next=71;break;case 69:return e.next=71,t.skip(Math.min(m,Number(b-t.getPos())));case 71:e.next=75;break;case 73:return e.next=75,t.skip(Math.min(m,Number(h-t.getPos())));case 75:e.next=4;break;case 77:if(!((U=n.size-Number(t.getPos()-x))>0)){e.next=83;break}return e.next=81,t.skip(U);case 81:e.next=84;break;case 83:U<0&&i.z3("read vpcc error, size: ".concat(n.size,", read: ").concat(n.size-U),p,153);case 84:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},40179:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c=r(34677),u=r(6660),o="src/avformat/formats/mov/parsing/hdlr.ts";function f(e,t,r,n){return d.apply(this,arguments)}function d(){return(d=(0,n.A)(s().mark((function e(t,r,n,a){var f,d,p,l,x,h,k;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=t.getPos(),e.next=3,t.readUint8();case 3:return d=e.sent,e.next=6,t.skip(3);case 6:if(0!==d){e.next=36;break}return e.next=9,t.skip(4);case 9:return e.next=11,t.readString(4);case 11:return p=e.sent,l=u.f3[p],(0,c.A)(l)&&(r.codecpar.codecType=l),e.next=16,t.skip(4);case 16:return e.next=18,t.skip(4);case 18:return e.next=20,t.skip(4);case 20:if(!((x=n.size-24)>0)){e.next=36;break}if(e.t0=!a.isom,!e.t0){e.next=29;break}return e.next=26,t.peekUint8();case 26:e.t1=e.sent,e.t2=x-1,e.t0=e.t1===e.t2;case 29:if(!(h=e.t0)){e.next=33;break}return e.next=33,t.skip(1);case 33:return e.next=35,t.readString(x-(h?1:0));case 35:r.metadata.handlerName=e.sent;case 36:if(!((k=n.size-Number(t.getPos()-f))>0)){e.next=42;break}return e.next=40,t.skip(k);case 40:e.next=43;break;case 42:k<0&&i.z3("read hdlr error, size: ".concat(n.size,", read: ").concat(n.size-k),o,77);case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},31421:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(25182),a=r(36443),s=r.n(a),i=r(37837),c=r(14686),u=r(4624),o=r(53e3),f="src/avformat/formats/mov/parsing/hvcc.ts";function d(e,t,r,n){return p.apply(this,arguments)}function p(){return(p=(0,n.A)(s().mark((function e(t,r,n,a){var d,p,l,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=t.getPos(),r.codecpar.codecId=173,p=(0,i.sY)(n.size),e.next=5,t.readBuffer(n.size,(0,c.JW)(p,n.size));case 5:if(l=e.sent,a.foundMoov?(r.sideData[1]=l.slice(),(0,i.Eb)(p)):(r.codecpar.extradata=p,r.codecpar.extradataSize=n.size,r.sideData[1]=l.slice()),o.XC(r,r.sideData[1]),!((x=n.size-Number(t.getPos()-d))>0)){e.next=14;break}return e.next=12,t.skip(x);case 12:e.next=15;break;case 14:x<0&&u.z3("read hevc error, size: ".concat(n.size,", read: ").concat(n.size-x),f,63);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},45248:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/mdhd.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l,x,h,k,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return o=e.sent,e.next=6,t.skip(3);case 6:if(f=BigInt(0),d=BigInt(0),p=0,l=BigInt(0),1!==o){e.next=25;break}return e.next=13,t.readUint64();case 13:return f=e.sent,e.next=16,t.readUint64();case 16:return d=e.sent,e.next=19,t.readUint32();case 19:return p=e.sent,e.next=22,t.readUint64();case 22:l=e.sent,e.next=49;break;case 25:return e.t0=BigInt,e.t1=Math,e.next=29,t.readUint32();case 29:return e.t2=e.sent,e.t3=e.t1.floor.call(e.t1,e.t2),f=(0,e.t0)(e.t3),e.t4=BigInt,e.t5=Math,e.next=36,t.readUint32();case 36:return e.t6=e.sent,e.t7=e.t5.floor.call(e.t5,e.t6),d=(0,e.t4)(e.t7),e.next=41,t.readUint32();case 41:return p=e.sent,e.t8=BigInt,e.t9=Math,e.next=46,t.readUint32();case 46:e.t10=e.sent,e.t11=e.t9.floor.call(e.t9,e.t10),l=(0,e.t8)(e.t11);case 49:return r.duration=l,r.timeBase.den=p,r.timeBase.num=1,r.metadata.creationTime=f,r.metadata.modificationTime=d,e.next=56,t.readUint16();case 56:return x=e.sent,(h=[])[0]=x>>10&31,h[1]=x>>5&31,h[2]=31&x,k=String.fromCharCode(h[0]+96,h[1]+96,h[2]+96),r.metadata.language=x,r.metadata.languageString=k,e.next=66,t.skip(2);case 66:if(!((m=n.size-Number(t.getPos()-u))>0)){e.next=72;break}return e.next=70,t.skip(m);case 70:e.next=73;break;case 72:m<0&&i.z3("read mdhd error, size: ".concat(n.size,", read: ").concat(n.size-m),c,83);case 73:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},7018:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/mfhd.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return e.sent,e.next=6,t.skip(3);case 6:return e.next=8,t.readUint32();case 8:if(a.currentFragment.sequence=e.sent,!((o=n.size-Number(t.getPos()-u))>0)){e.next=15;break}return e.next=13,t.skip(o);case 13:e.next=16;break;case 15:o<0&&i.z3("read vpcc error, size: ".concat(n.size,", read: ").concat(n.size-o),c,49);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},19354:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/mvhd.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return o=e.sent,e.next=6,t.skip(3);case 6:if(1!==o){e.next=21;break}return e.next=9,t.readUint64();case 9:return a.creationTime=e.sent,e.next=12,t.readUint64();case 12:return a.modificationTime=e.sent,e.next=15,t.readUint32();case 15:return a.timescale=e.sent,e.next=18,t.readUint64();case 18:a.duration=e.sent,e.next=45;break;case 21:return e.t0=BigInt,e.t1=Math,e.next=25,t.readUint32();case 25:return e.t2=e.sent,e.t3=e.t1.floor.call(e.t1,e.t2),a.creationTime=(0,e.t0)(e.t3),e.t4=BigInt,e.t5=Math,e.next=32,t.readUint32();case 32:return e.t6=e.sent,e.t7=e.t5.floor.call(e.t5,e.t6),a.modificationTime=(0,e.t4)(e.t7),e.next=37,t.readUint32();case 37:return a.timescale=e.sent,e.t8=BigInt,e.t9=Math,e.next=42,t.readUint32();case 42:e.t10=e.sent,e.t11=e.t9.floor.call(e.t9,e.t10),a.duration=(0,e.t8)(e.t11);case 45:return e.next=47,t.readUint32();case 47:return a.rate=e.sent,e.next=50,t.readUint16();case 50:e.t12=e.sent,a.volume=e.t12>>>8,t.skip(10),a.matrix=new Uint32Array(9),f=0;case 55:if(!(f<9)){e.next=62;break}return e.next=58,t.readUint32();case 58:a.matrix[f]=e.sent;case 59:f++,e.next=55;break;case 62:return t.skip(24),e.next=65,t.readUint32();case 65:if(a.nextTrackId=e.sent,!((d=n.size-Number(t.getPos()-u))>0)){e.next=72;break}return e.next=70,t.skip(d);case 70:e.next=73;break;case 72:d<0&&i.z3("read mvhd error, size: ".concat(n.size,", read: ").concat(n.size-d),c,70);case 73:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},68361:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var n,a=r(134),s=r(91635),i=r(59299),c=r(63080),u=r(62831),o=r(6570),f=r(34136),d=r(15692),p=r(37213),l=r(45248),x=r(19354),h=r(27436),k=r(40179),m=r(35173),b=r(25778),v=r(7018),g=r(61807),U=r(67523),A=r(58996),z=r(65977);const w=(n={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(n,(0,z.A)("stts"),s.A),(0,z.A)("ctts"),i.A),(0,z.A)("stss"),c.A),(0,z.A)("stsz"),u.A),(0,z.A)("stz2"),o.A),(0,z.A)("stsc"),f.A),(0,z.A)("stco"),d.A),(0,z.A)("co64"),p.A),(0,z.A)("mdhd"),l.A),(0,z.A)("mvhd"),x.A),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(n,(0,z.A)("tkhd"),h.A),(0,z.A)("hdlr"),k.A),(0,z.A)("stsd"),m.A),(0,z.A)("trex"),b.A),(0,z.A)("mfhd"),v.A),(0,z.A)("tfhd"),g.A),(0,z.A)("tfdt"),U.A),(0,z.A)("trun"),A.A))},15692:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/stco.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return o=e.sent,e.next=6,t.skip(3);case 6:return f=[],e.next=9,t.readUint32();case 9:if(d=e.sent,0!==o){e.next=25;break}p=0;case 12:if(!(p<d)){e.next=25;break}return e.t0=f,e.t1=BigInt,e.t2=Math,e.next=18,t.readUint32();case 18:e.t3=e.sent,e.t4=e.t2.floor.call(e.t2,e.t3),e.t5=(0,e.t1)(e.t4),e.t0.push.call(e.t0,e.t5);case 22:p++,e.next=12;break;case 25:if(r.privData.chunkOffsets=f,!((l=n.size-Number(t.getPos()-u))>0)){e.next=32;break}return e.next=30,t.skip(l);case 30:e.next=33;break;case 32:l<0&&i.z3("read stco error, size: ".concat(n.size,", read: ").concat(n.size-l),c,56);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},34136:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/stsc.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l,x,h,k;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return o=e.sent,e.next=6,t.skip(3);case 6:return f=r.privData,d=[],p=[],l=[],e.next=12,t.readUint32();case 12:if(x=e.sent,0!==o){e.next=34;break}h=0;case 15:if(!(h<x)){e.next=34;break}return e.t0=d,e.next=19,t.readUint32();case 19:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.t2=p,e.next=24,t.readUint32();case 24:return e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.t4=l,e.next=29,t.readUint32();case 29:e.t5=e.sent,e.t4.push.call(e.t4,e.t5);case 31:h++,e.next=15;break;case 34:if(f.stscFirstChunk=d,f.stscSamplesPerChunk=p,f.stscSampleDescriptionIndex=l,!((k=n.size-Number(t.getPos()-u))>0)){e.next=43;break}return e.next=41,t.skip(k);case 41:e.next=44;break;case 43:k<0&&i.z3("read stsc error, size: ".concat(n.size,", read: ").concat(n.size-k),c,65);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},35173:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c=r(65977),u=r(6660),o=r(73840),f=r(31421),d=r(83561),p=r(38582),l=r(28412),x=r(28460),h=r(86528),k=r(41781),m=r(12869),b="src/avformat/formats/mov/parsing/stsd.ts";function v(e,t,r,n){return g.apply(this,arguments)}function g(){return(g=(0,n.A)(s().mark((function e(t,r,n,a){var v,g,U,A,z,w,y,I,P,B,S,M,D,N,C;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v=t.getPos(),e.next=3,t.readUint8();case 3:return g=e.sent,e.next=6,t.skip(3);case 6:return U=r.privData,e.next=9,t.readUint32();case 9:A=e.sent,z=0;case 11:if(!(z<A)){e.next=239;break}return e.next=14,t.readUint32();case 14:return w=e.sent,e.next=17,t.readUint32();case 17:if(y=e.sent,I=t.getPos()+BigInt(Math.floor(w-8)),u.uf[y]&&(r.codecpar.codecId=u.uf[y]),0!==w){e.next=25;break}return i.R8("stsd entry invalid box size 0, skip",b,73),e.next=24,t.skip(Number(I-t.getPos()));case 24:return e.abrupt("break",239);case 25:if(!(w>=16)){e.next=32;break}return e.next=28,t.skip(6);case 28:return e.next=30,t.skip(2);case 30:e.next=33;break;case 32:w<=7&&i.h2("invalid size: ".concat(w," in stsd"),b,86);case 33:if(0!==r.codecpar.codecType){e.next=126;break}return e.next=36,t.skip(2);case 36:return e.next=38,t.skip(2);case 38:return e.next=40,t.readString(4);case 40:return r.metadata.vendorId=e.sent,e.next=43,t.skip(4);case 43:return e.next=45,t.skip(4);case 45:return e.next=47,t.readUint16();case 47:return r.codecpar.width=e.sent,e.next=50,t.readUint16();case 50:return r.codecpar.height=e.sent,e.next=53,t.skip(4);case 53:return e.next=55,t.skip(4);case 55:return e.next=57,t.skip(4);case 57:return e.next=59,t.skip(2);case 59:return e.next=61,t.readUint8();case 61:return(P=e.sent)>31&&(P=31),e.next=65,t.readString(P);case 65:if(r.metadata.encoder=e.sent,!(P<31)){e.next=69;break}return e.next=69,t.skip(31-P);case 69:return e.next=71,t.skip(2);case 71:return e.next=73,t.skip(2);case 73:if(!(t.getPos()<I)){e.next=124;break}return e.next=76,t.readUint32();case 76:return B=e.sent,e.next=79,t.readUint32();case 79:if(S=e.sent,0!==B){e.next=85;break}return i.R8("stsd video invalid box size 0, skip",b,135),e.next=84,t.skip(Number(I-t.getPos()));case 84:return e.abrupt("continue",73);case 85:if(S!==(0,c.A)("avcC")){e.next=90;break}return e.next=88,(0,o.A)(t,r,{type:S,size:B-8},a);case 88:e.next=122;break;case 90:if(S!==(0,c.A)("hvcC")){e.next=95;break}return e.next=93,(0,f.A)(t,r,{type:S,size:B-8},a);case 93:e.next=122;break;case 95:if(S!==(0,c.A)("av1C")){e.next=100;break}return e.next=98,(0,p.A)(t,r,{type:S,size:B-8},a);case 98:e.next=122;break;case 100:if(S!==(0,c.A)("vpcC")){e.next=105;break}return e.next=103,(0,d.A)(t,r,{type:S,size:B-8},a);case 103:e.next=122;break;case 105:if(S!==(0,c.A)("esds")){e.next=110;break}return e.next=108,(0,l.A)(t,r,{type:S,size:B-8},a);case 108:e.next=122;break;case 110:if(S!==(0,c.A)("wave")){e.next=115;break}return e.next=113,(0,x.A)(t,r,{type:S,size:B-8},a);case 113:e.next=122;break;case 115:if(S!==(0,c.A)("colr")){e.next=120;break}return e.next=118,(0,m.A)(t,r,{type:S,size:B-8},a);case 118:e.next=122;break;case 120:return e.next=122,t.skip(Math.min(B-8,Number(I-t.getPos())));case 122:e.next=73;break;case 124:e.next=236;break;case 126:if(1!==r.codecpar.codecType){e.next=228;break}return e.next=129,t.readUint16();case 129:return M=e.sent,e.next=132,t.skip(2);case 132:return e.next=134,t.readString(4);case 134:return r.metadata.vendorId=e.sent,e.next=137,t.readUint16();case 137:return r.codecpar.chLayout.nbChannels=e.sent,r.codecpar.channels=r.codecpar.chLayout.nbChannels,e.next=141,t.readUint16();case 141:return r.codecpar.bitsPerCodedSample=e.sent,e.next=144,t.readUint16();case 144:return U.audioCid=e.sent,e.next=147,t.skip(2);case 147:return e.next=149,t.readUint32();case 149:if(e.t0=e.sent,r.codecpar.sampleRate=e.t0>>>16,a.isom&&!(0===g&&M>0)){e.next=190;break}if(1!==M){e.next=165;break}return e.next=155,t.readUint32();case 155:return U.samplesPerFrame=e.sent,e.next=158,t.skip(4);case 158:return e.next=160,t.readUint32();case 160:return U.bytesPerFrame=e.sent,e.next=163,t.skip(4);case 163:e.next=190;break;case 165:if(2!==M){e.next=190;break}return e.next=168,t.skip(4);case 168:return e.t1=Number,e.next=171,t.readUint64();case 171:return e.t2=e.sent,r.codecpar.sampleRate=(0,e.t1)(e.t2),e.next=175,t.readUint32();case 175:return r.codecpar.chLayout.nbChannels=e.sent,r.codecpar.channels=r.codecpar.chLayout.nbChannels,e.next=179,t.skip(4);case 179:return e.next=181,t.readUint32();case 181:return r.codecpar.bitsPerCodedSample=e.sent,e.next=184,t.skip(4);case 184:return e.next=186,t.readUint32();case 186:return U.bytesPerFrame=e.sent,e.next=189,t.readUint32();case 189:U.samplesPerFrame=e.sent;case 190:if(!(t.getPos()<I)){e.next=226;break}return e.next=193,t.readUint32();case 193:return D=e.sent,e.next=196,t.readUint32();case 196:if(N=e.sent,0!==D){e.next=202;break}return i.R8("stsd audio invalid box size 0, skip",b,277),e.next=201,t.skip(Number(I-t.getPos()));case 201:return e.abrupt("continue",190);case 202:if(N!==(0,c.A)("esds")){e.next=207;break}return e.next=205,(0,l.A)(t,r,{type:N,size:D-8},a);case 205:e.next=224;break;case 207:if(N!==(0,c.A)("dfLa")){e.next=212;break}return e.next=210,(0,h.A)(t,r,{type:N,size:D-8},a);case 210:e.next=224;break;case 212:if(N!==(0,c.A)("dOps")){e.next=217;break}return e.next=215,(0,k.A)(t,r,{type:N,size:D-8},a);case 215:e.next=224;break;case 217:if(N!==(0,c.A)("wave")){e.next=222;break}return e.next=220,(0,x.A)(t,r,{type:N,size:D-8},a);case 220:e.next=224;break;case 222:return e.next=224,t.skip(Math.min(D-8,Number(I-t.getPos())));case 224:e.next=190;break;case 226:e.next=236;break;case 228:if(3!==r.codecpar.codecType){e.next=234;break}return(y===(0,c.A)("stpp")||y===(0,c.A)("wvtt")||y===(0,c.A)("tx3g")||y===(0,c.A)("text")||y===(0,c.A)("c608"))&&r.codecpar.codecId,e.next=232,t.skip(Math.min(w-8,Number(I-t.getPos())));case 232:e.next=236;break;case 234:return e.next=236,t.skip(Math.min(w-8,Number(I-t.getPos())));case 236:z++,e.next=11;break;case 239:if(!((C=n.size-Number(t.getPos()-v))>0)){e.next=245;break}return e.next=243,t.skip(C);case 243:e.next=246;break;case 245:C<0&&i.z3("read stsd error, size: ".concat(n.size,", read: ").concat(n.size-C),b,356);case 246:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},63080:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(25182),a=r(36443),s=r.n(a),i=r(80662),c=r.n(i),u=r(4624),o="src/avformat/formats/mov/parsing/stss.ts";function f(e,t,r,n){return d.apply(this,arguments)}function d(){return(d=(0,n.A)(s().mark((function e(t,r,n,a){var i,f,d,p,l,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.getPos(),e.next=3,t.readUint8();case 3:return f=e.sent,e.next=6,t.skip(3);case 6:return d=new(c()),e.next=9,t.readUint32();case 9:if(p=e.sent,0!==f){e.next=21;break}l=0;case 12:if(!(l<p)){e.next=21;break}return e.t0=d,e.next=16,t.readUint32();case 16:e.t1=e.sent,e.t0.set.call(e.t0,e.t1,!0);case 18:l++,e.next=12;break;case 21:if(r.privData.stssSampleNumbersMap=d,!((x=n.size-Number(t.getPos()-i))>0)){e.next=28;break}return e.next=26,t.skip(x);case 26:e.next=29;break;case 28:x<0&&u.z3("read stss error, size: ".concat(n.size,", read: ").concat(n.size-x),o,57);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},62831:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/stsz.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:if(o=e.sent,t.skip(3),f=[],d=0,p=0,0!==o){e.next=29;break}return e.next=11,t.readUint32();case 11:return d=e.sent,e.next=14,t.readUint32();case 14:p=e.sent,l=0;case 16:if(!(l<p)){e.next=29;break}if(0!==d){e.next=25;break}return e.t0=f,e.next=21,t.readUint32();case 21:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=26;break;case 25:f[l]=d;case 26:l++,e.next=16;break;case 29:if(r.privData.sampleSizes=f,!((x=n.size-Number(t.getPos()-u))>0)){e.next=36;break}return e.next=34,t.skip(x);case 34:e.next=37;break;case 36:x<0&&i.z3("read stsz error, size: ".concat(n.size,", read: ").concat(n.size-x),c,65);case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},91635:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/stts.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l,x,h,k;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return o=e.sent,e.next=6,t.skip(3);case 6:return f=r.privData,d=[],p=[],e.next=11,t.readUint32();case 11:if(l=e.sent,x=1,0!==o){e.next=29;break}h=0;case 15:if(!(h<l)){e.next=29;break}return e.t0=d,e.next=19,t.readUint32();case 19:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=23,t.readInt32();case 23:(x=e.sent)<0&&i.R8("File uses negative stts sample delta, using value 1 instead, sync may be lost!",c,53),p.push(x);case 26:h++,e.next=15;break;case 29:if(f.sttsSampleCounts=d,f.sttsSampleDeltas=p,!((k=n.size-Number(t.getPos()-u))>0)){e.next=37;break}return e.next=35,t.skip(k);case 35:e.next=38;break;case 37:k<0&&i.z3("read stts error, size: ".concat(n.size,", read: ").concat(n.size-k),c,67);case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6570:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/stz2.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l,x,h,k,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return o=e.sent,e.next=6,t.skip(3);case 6:if(f=[],d=0,p=0,0!==o){e.next=54;break}return e.next=12,t.skip(3);case 12:return e.next=14,t.readUint8();case 14:return p=e.sent,e.next=17,t.readUint32();case 17:if(d=e.sent,4!==p){e.next=31;break}l=0;case 20:if(!(l<d)){e.next=29;break}return e.next=23,t.readUint8();case 23:x=e.sent,f[l]=x>>4&15,f[l+1]=15&x;case 26:l+=2,e.next=20;break;case 29:e.next=54;break;case 31:if(8!==p){e.next=42;break}h=0;case 33:if(!(h<d)){e.next=40;break}return e.next=36,t.readUint8();case 36:f[h]=e.sent;case 37:h++,e.next=33;break;case 40:e.next=54;break;case 42:if(16!==p){e.next=53;break}k=0;case 44:if(!(k<d)){e.next=51;break}return e.next=47,t.readUint16();case 47:f[k]=e.sent;case 48:k++,e.next=44;break;case 51:e.next=54;break;case 53:i.z3("Error in length field in stz2 box",c,67);case 54:if(r.privData.sampleSizes=f,!((m=n.size-Number(t.getPos()-u))>0)){e.next=61;break}return e.next=59,t.skip(m);case 59:e.next=62;break;case 61:m<0&&i.z3("read stz2 error, size: ".concat(n.size,", read: ").concat(n.size-m),c,78);case 62:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},67523:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/tfdt.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return o=e.sent,e.next=6,t.skip(3);case 6:if(!(f=a.currentFragment.currentTrack)){e.next=21;break}if(1!==o){e.next=14;break}return e.next=11,t.readUint64();case 11:f.baseMediaDecodeTime=e.sent,e.next=21;break;case 14:return e.t0=BigInt,e.t1=Math,e.next=18,t.readUint32();case 18:e.t2=e.sent,e.t3=e.t1.floor.call(e.t1,e.t2),f.baseMediaDecodeTime=(0,e.t0)(e.t3);case 21:if(!((d=n.size-Number(t.getPos()-u))>0)){e.next=27;break}return e.next=25,t.skip(d);case 25:e.next=28;break;case 27:d<0&&i.z3("read vpcc error, size: ".concat(n.size,", read: ").concat(n.size-d),c,57);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},61807:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/tfhd.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return e.sent,e.next=6,t.readUint24();case 6:return o=e.sent,e.next=9,t.readUint32();case 9:if(f=e.sent,(d=a.currentFragment.currentTrack).trackId=f,!d){e.next=33;break}if(!(1&o)){e.next=17;break}return e.next=16,t.readUint64();case 16:d.baseDataOffset=e.sent;case 17:if(!(2&o)){e.next=20;break}return e.next=20,t.skip(4);case 20:if(!(8&o)){e.next=24;break}return e.next=23,t.readUint32();case 23:d.defaultSampleDuration=e.sent;case 24:if(!(16&o)){e.next=28;break}return e.next=27,t.readUint32();case 27:d.defaultSampleSize=e.sent;case 28:if(!(32&o)){e.next=32;break}return e.next=31,t.readUint32();case 31:d.defaultSampleFlags=e.sent;case 32:131072&o&&(d.baseIsMoof=!0);case 33:if(!((p=n.size-Number(t.getPos()-u))>0)){e.next=39;break}return e.next=37,t.skip(p);case 37:e.next=40;break;case 39:p<0&&i.z3("read vpcc error, size: ".concat(n.size,", read: ").concat(n.size-p),c,75);case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},27436:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/tkhd.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.privData,o=t.getPos(),e.next=4,t.readUint8();case 4:return f=e.sent,e.next=7,t.readUint24();case 7:if(u.flags=e.sent,1!==f){e.next=24;break}return e.next=11,t.readUint64();case 11:return r.metadata.creationTime=e.sent,e.next=14,t.readUint64();case 14:return r.metadata.modificationTime=e.sent,e.next=17,t.readUint32();case 17:return u.trackId=e.sent,t.skip(4),e.next=21,t.readUint64();case 21:u.duration=e.sent,e.next=49;break;case 24:return e.t0=BigInt,e.t1=Math,e.next=28,t.readUint32();case 28:return e.t2=e.sent,e.t3=e.t1.floor.call(e.t1,e.t2),r.metadata.creationTime=(0,e.t0)(e.t3),e.t4=BigInt,e.t5=Math,e.next=35,t.readUint32();case 35:return e.t6=e.sent,e.t7=e.t5.floor.call(e.t5,e.t6),r.metadata.modificationTime=(0,e.t4)(e.t7),e.next=40,t.readUint32();case 40:return u.trackId=e.sent,t.skip(4),e.t8=BigInt,e.t9=Math,e.next=46,t.readUint32();case 46:e.t10=e.sent,e.t11=e.t9.floor.call(e.t9,e.t10),u.duration=(0,e.t8)(e.t11);case 49:return t.skip(8),e.next=52,t.readInt16();case 52:return u.layer=e.sent,e.next=55,t.readInt16();case 55:return u.alternateGroup=e.sent,e.next=58,t.readInt16();case 58:e.t12=e.sent,u.volume=e.t12>>8,t.skip(2),u.matrix=new Uint32Array(9),d=0;case 63:if(!(d<9)){e.next=70;break}return e.next=66,t.readUint32();case 66:u.matrix[d]=e.sent;case 67:d++,e.next=63;break;case 70:return e.next=72,t.readUint32();case 72:return e.t13=e.sent,u.width=e.t13>>16,e.next=76,t.readUint32();case 76:if(e.t14=e.sent,u.height=e.t14>>16,!((p=n.size-Number(t.getPos()-o))>0)){e.next=84;break}return e.next=82,t.skip(p);case 82:e.next=85;break;case 84:p<0&&i.z3("read tkhd error, size: ".concat(n.size,", read: ").concat(n.size-p),c,77);case 85:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},25778:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/trex.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return e.sent,e.next=6,t.skip(3);case 6:return e.next=8,t.readUint32();case 8:return o=e.sent,e.next=11,t.skip(4);case 11:return e.next=13,t.readUint32();case 13:return f=e.sent,e.next=16,t.readUint32();case 16:return d=e.sent,e.next=19,t.readUint32();case 19:if(p=e.sent,a.trexs.push({trackId:o,duration:f,size:d,flags:p}),!((l=n.size-Number(t.getPos()-u))>0)){e.next=27;break}return e.next=25,t.skip(l);case 25:e.next=28;break;case 27:l<0&&i.z3("read trex error, size: ".concat(n.size,", read: ").concat(n.size-l),c,61);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},58996:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c="src/avformat/formats/mov/parsing/trun.ts";function u(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.A)(s().mark((function e(t,r,n,a){var u,o,f,d,p,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getPos(),e.next=3,t.readUint8();case 3:return o=e.sent,e.next=6,t.readUint24();case 6:if(f=e.sent,!(d=a.currentFragment.currentTrack)){e.next=57;break}return e.next=11,t.readUint32();case 11:if(d.sampleCount=e.sent,!(1&f)){e.next=16;break}return e.next=15,t.readInt32();case 15:d.dataOffset=e.sent;case 16:if(!(4&f)){e.next=20;break}return e.next=19,t.readUint32();case 19:d.firstSampleFlags=e.sent;case 20:p=0;case 21:if(!(p<d.sampleCount)){e.next=57;break}if(!(256&f)){e.next=28;break}return e.t0=d.sampleDurations,e.next=26,t.readUint32();case 26:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 28:if(!(512&f)){e.next=34;break}return e.t2=d.sampleSizes,e.next=32,t.readUint32();case 32:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 34:if(!(1024&f)){e.next=40;break}return e.t4=d.sampleFlags,e.next=38,t.readUint32();case 38:e.t5=e.sent,e.t4.push.call(e.t4,e.t5);case 40:if(!(2048&f)){e.next=54;break}if(0!==o){e.next=49;break}return e.t6=d.sampleCompositionTimeOffset,e.next=45,t.readUint32();case 45:e.t7=e.sent,e.t6.push.call(e.t6,e.t7),e.next=54;break;case 49:return e.t8=d.sampleCompositionTimeOffset,e.next=52,t.readInt32();case 52:e.t9=e.sent,e.t8.push.call(e.t8,e.t9);case 54:p++,e.next=21;break;case 57:if(!((l=n.size-Number(t.getPos()-u))>0)){e.next=63;break}return e.next=61,t.skip(l);case 61:e.next=64;break;case 63:l<0&&i.z3("read vpcc error, size: ".concat(n.size,", read: ").concat(n.size-l),c,79);case 64:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},83561:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(25182),a=r(36443),s=r.n(a),i=r(37837),c=r(14686),u=r(4624),o=r(58919),f="src/avformat/formats/mov/parsing/vpcc.ts";function d(e,t,r,n){return p.apply(this,arguments)}function p(){return(p=(0,n.A)(s().mark((function e(t,r,n,a){var d,p,l,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=t.getPos(),r.codecpar.codecId=167,p=(0,i.sY)(n.size),e.next=5,t.readBuffer(n.size,(0,c.JW)(p,n.size));case 5:if(l=e.sent,a.foundMoov?(r.sideData[1]=l.slice(),(0,i.Eb)(p)):(r.codecpar.extradata=p,r.codecpar.extradataSize=n.size,r.sideData[1]=l.slice()),o.X(r,r.sideData[1]),!((x=n.size-Number(t.getPos()-d))>0)){e.next=14;break}return e.next=12,t.skip(x);case 12:e.next=15;break;case 14:x<0&&u.z3("read vpcc error, size: ".concat(n.size,", read: ").concat(n.size-x),f,63);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},28460:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(25182),a=r(36443),s=r.n(a),i=r(4624),c=r(65977),u=r(28412),o="src/avformat/formats/mov/parsing/wave.ts";function f(e,t,r,n){return d.apply(this,arguments)}function d(){return(d=(0,n.A)(s().mark((function e(t,r,n,a){var f,d,p,l,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=t.getPos(),d=f+BigInt(Math.floor(n.size));case 2:if(!(t.getPos()<d)){e.next=23;break}return e.next=5,t.readUint32();case 5:return p=e.sent,e.next=8,t.readUint32();case 8:if(l=e.sent,0!==p){e.next=14;break}return i.R8("wave invalid box size 0, skip",o,47),e.next=13,t.skip(Number(d-t.getPos()));case 13:return e.abrupt("continue",2);case 14:if(l!==(0,c.A)("esds")){e.next=19;break}return e.next=17,(0,u.A)(t,r,{type:l,size:p-8},a);case 17:e.next=21;break;case 19:return e.next=21,t.skip(Math.min(p-8,Number(d-t.getPos())));case 21:e.next=2;break;case 23:if(!((x=n.size-Number(t.getPos()-f))>0)){e.next=29;break}return e.next=27,t.skip(x);case 27:e.next=30;break;case 29:x<0&&i.z3("read vpcc error, size: ".concat(n.size,", read: ").concat(n.size-x),o,73);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},65977:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(4624),a="src/avformat/function/mktag.ts";function s(e){4!==e.length&&n.R8("tag length is not 4, tag: ".concat(e),a,30);for(var t=0,r=0;r<4;r++)t=t<<8|e.charCodeAt(r);return t}},null:()=>{},23991:(e,t,r)=>{"use strict";function n(e){for(var t=0;t<32&&0===e.readU1();)t++;return e.readU(t)+((1<<t)-1)}function a(e){var t=n(e);return 1&t?(t+1)/2:-t/2}r.d(t,{$x:()=>a,xb:()=>n})},60264:(e,t,r)=>{"use strict";function n(e){return e.length>4&&0===e[0]&&0===e[1]&&(1===e[2]||0===e[2]&&1===e[3])}function a(e,t){for(var r=0,n=t;n<e.length;n++)switch(e[n]){case 0:r++;break;case 1:if(r>=2)return{offset:n-Math.min(r,3),startCode:Math.min(r+1,4)};r=0;break;default:r=0}return{offset:-1,startCode:0}}function s(e){for(var t=[],r=a(e,0),n={offset:-1,startCode:0};(n=a(e,r.offset+r.startCode)).offset>-1;)t.push(e.subarray(r.offset+r.startCode,n.offset,!0)),r=n;return t.push(e.subarray(r.offset+r.startCode,void 0,!0)),t}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;r||(r=e.length);for(var n=new Uint8Array(e.length),a=0,s=0,i=0;i<e.length;i++){if(i>=t&&i<r)if(0===e[i])a++;else if(3===e[i]&&2===a&&i+1<e.length&&e[i+1]<=3){if(++i===e.length)break;a=0===e[i]?1:0}else a=0;n[s++]=e[i]}return n.slice(0,s)}r.d(t,{BN:()=>i,Bs:()=>n,py:()=>s})},37246:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(78716),a=r(81570),s=r(134),i=r(4624),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,n.A)(this,e),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"bitsLeft",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"endPointer",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.size=t,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,a.A)(e,[{key:"peekU1",value:function(){(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();var e=this.pointer,t=this.bitsLeft;return 0===t&&(e++,t=8),this.buffer[e]>>t-1&1}},{key:"readU1",value:function(){var e;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,e=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8),e}},{key:"readU",value:function(e){for(var t=0,r=0;r<e;r++)t|=this.readU1()<<e-r-1;return t}},{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"getPos",value:function(){return this.pointer}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&this.pointer++,!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);var e=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(e<0)throw this.error=e,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+e,this.pointer=0}else{var t=this.onFlush(this.buffer);if(this.endPointer=t,this.pointer=0,this.bitsLeft=8,t<0)throw this.error=t,Error("IOReader error, flush failed")}}},{key:"getBuffer",value:function(){return this.buffer}},{key:"appendBuffer",value:function(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{var t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,i.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",174)}}},{key:"clear",value:function(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0}},{key:"skipPadding",value:function(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++)}}]),e}()},729:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(78716),a=r(81570),s=r(134),i=r(4624),c=r(50011),u=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,n.A)(this,e),(0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"byteStart",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!r}return(0,a.A)(e,[{key:"writeUint8",value:function(e){this.data.setUint8(this.pos+++this.byteStart,e)}},{key:"writeUint16",value:function(e){this.data.setUint16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeUint24",value:function(e){var t=3840&e,r=240&e,n=15&e;this.littleEndian?(this.writeUint8(n),this.writeUint8(r),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(r),this.writeUint8(n))}},{key:"writeUint32",value:function(e){this.data.setUint32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeUint64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeUint32(Number(t)),this.writeUint32(Number(r))):(this.writeUint32(Number(r)),this.writeUint32(Number(t)))}},{key:"writeInt8",value:function(e){this.data.setInt8(this.pos+++this.byteStart,e)}},{key:"writeInt16",value:function(e){this.data.setInt16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeInt32",value:function(e){this.data.setInt32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeInt64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeInt32(Number(t)),this.writeInt32(Number(r))):(this.writeInt32(Number(r)),this.writeInt32(Number(t)))}},{key:"writeFloat",value:function(e){this.data.setFloat32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeDouble",value:function(e){this.data.setFloat64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}},{key:"getPos",value:function(){return this.pos}},{key:"seek",value:function(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}},{key:"skip",value:function(e){this.seek(this.pos+e)}},{key:"back",value:function(e){this.seek(this.pos-e)}},{key:"remainingSize",value:function(){return this.size-this.pos}},{key:"writeBuffer",value:function(e){var t=e.length;this.remainingSize()<t&&(t=this.remainingSize(),i.R8("the remaining buffer size is smaller then the wrote buffer, hope set ".concat(e.length,", but set ").concat(t),"src/common/io/BufferWriter.ts",211)),this.buffer.set(e,this.pos),this.pos+=e.length}},{key:"writeString",value:function(e){var t=c.l(e);return this.writeBuffer(t),t.length}},{key:"getWroteBuffer",value:function(){return this.buffer.subarray(0,this.pos)}},{key:"resetBuffer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}]),e}()},803:(e,t,r)=>{var n=r(16560),a=r(54220);function s(t){return e.exports=s="function"==typeof n&&"symbol"==typeof a?function(e){return typeof e}:function(e){return e&&"function"==typeof n&&e.constructor===n&&e!==n.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}}]);