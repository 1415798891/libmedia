"use strict";(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[611],{85947:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(78716),i=r(81570),a=r(134),s=function(){function t(){(0,n.A)(this,t),(0,a.A)(this,"type",-1),(0,a.A)(this,"onStreamAdd",void 0)}return(0,i.A)(t,[{key:"destroy",value:function(t){}}]),t}()},85611:(t,e,r)=>{r.r(e),r.d(e,{default:()=>R});var n=r(88435),i=r.n(n),a=r(25182),s=r(78716),u=r(81570),c=r(77193),o=r(25767),f=r(43070),p=r(31060),h=r(134),d=r(36443),l=r.n(d),g=r(50932),k=r(4624),x=r(9705),m=r(85947),b=r(14686),v=r(37837),B=r(71517),A=r(72739),I=r(50011),y=r(54825);function T(t,e,r){return e=(0,o.A)(e),(0,c.A)(t,w()?i()(e,r||[],(0,o.A)(t).constructor):e.apply(t,r))}function w(){try{var t=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(t){}return(w=function(){return!!t})()}var q="src/avformat/formats/IWebVttFormat.ts",R=function(t){function e(){var t;return(0,s.A)(this,e),t=T(this,e),(0,h.A)((0,f.A)(t),"type",15),(0,h.A)((0,f.A)(t),"queue",void 0),(0,h.A)((0,f.A)(t),"index",void 0),t}var r,n,i,c;return(0,p.A)(e,t),(0,u.A)(e,[{key:"init",value:function(t){this.queue=[]}},{key:"readChunk",value:(c=(0,a.A)(l().mark((function t(e){var r,n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r="",n=e.ioReader.getPos();case 2:return t.next=5,e.ioReader.readLine();case 5:if(""!==(i=t.sent)){t.next=8;break}return t.abrupt("break",11);case 8:r+=i+"\n",t.next=2;break;case 11:return t.abrupt("return",{chunk:r.trim(),pos:n});case 12:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})},{key:"readHeader",value:(i=(0,a.A)(l().mark((function t(e){var r,n,i,a,s,u,c=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ioReader.peekBuffer(3);case 2:if(239!==(r=t.sent)[0]||187!==r[1]||191!==r[2]){t.next=6;break}return t.next=6,e.ioReader.skip(3);case 6:return t.next=8,e.ioReader.peekString(6);case 8:if("WEBVTT"===t.sent){t.next=12;break}return k.z3("the file format is not vtt",q,89),t.abrupt("return",x.LR);case 12:return(n=e.createStream()).codecpar.codecId=94226,n.codecpar.codecType=3,n.timeBase.den=1e3,n.timeBase.num=1,t.next=19,e.ioReader.readLine();case 19:(i=t.sent).indexOf("-")>0&&(n.metadata.title=i.split("-").pop().trim()),this.index=0,a=[],s=BigInt(0),t.prev=24,u=l().mark((function t(){var r,i,u,o,f,p,h,d,g,k,x;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.readChunk(e);case 2:if(r=t.sent,i=r.chunk,u=r.pos,""!==i&&!/^NOTE/.test(i)){t.next=7;break}return t.abrupt("return",0);case 7:if(/^STYLE/.test(i)&&a.push({style:i.replace(/STYLE[\s|\n]?/,""),pos:u}),-1===(o=i.split("\n"))[0].indexOf("--\x3e")&&(f=o.shift().trim()),h=o.shift().split("--\x3e"),d=(0,y.j)(h.shift()),h=h.shift().trim().split(" "),!((g=(0,y.j)(h.shift()))<=d)){t.next=16;break}return t.abrupt("return",0);case 16:if((h=h.filter((function(t){return""!==t}))).length&&(p=h.join(" ")),k=o.join("\n").trim()){t.next=21;break}return t.abrupt("return",0);case 21:n.nbFrames++,n.duration=g,x={identifier:f,options:p,context:k,startTs:d,endTs:g,pos:u},d>=s?(c.queue.push(x),s=d):A._(c.queue,x,(function(t){return t.startTs<x.startTs?1:-1}));case 25:case"end":return t.stop()}}),t)}));case 26:return t.delegateYield(u(),"t0",28);case 28:if(0!==t.t0){t.next=31;break}return t.abrupt("continue",26);case 31:t.next=26;break;case 33:t.next=39;break;case 35:return t.prev=35,t.t1=t.catch(24),n.metadata.styles=a,t.abrupt("return",0);case 39:case"end":return t.stop()}}),t,this,[[24,35]])}))),function(t){return i.apply(this,arguments)})},{key:"readAVPacket",value:(n=(0,a.A)(l().mark((function t(e,r){var n,i,a,s,u,c,o,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.queue.length){t.next=2;break}return t.abrupt("return",x.LR);case 2:if(!(this.index>=this.queue.length)){t.next=4;break}return t.abrupt("return",-1048576);case 4:return n=e.streams.find((function(t){return 3===t.codecpar.codecType})),i=this.queue[this.index++],g.M[15](r+32,n.index),g.M[15](r+76,n.timeBase.den),g.M[15](r+72,n.timeBase.num),g.M[17](r+16,i.startTs),g.M[17](r+8,i.startTs),g.M[17](r+48,i.endTs-i.startTs),i.identifier&&(a=I.encode(i.identifier),s=(0,v.sY)(a.length),(0,b.lW)(s,a.length,a),(0,B.Ow)(r,16,s,a.length)),i.options&&(u=I.encode(i.options),c=(0,v.sY)(u.length),(0,b.lW)(c,u.length,u),(0,B.Ow)(r,17,c,u.length)),o=I.encode(i.context),f=(0,v.sY)(o.length),(0,b.lW)(f,o.length,o),(0,B.NX)(r,f,o.length),t.abrupt("return",0);case 18:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"seek",value:(r=(0,a.A)(l().mark((function t(e,r,n,i){var a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(2&i)){t.next=2;break}return t.abrupt("return",BigInt(x.E$));case 2:if(!(n<=BigInt(0))){t.next=5;break}return this.index=0,t.abrupt("return",BigInt(0));case 5:if(!((a=A.El(this.queue,(function(t){return t.startTs>n?-1:1})))>=0)){t.next=10;break}return k.Yz("seek in cues, found index: ".concat(a,", pts: ").concat(this.queue[a].startTs,", pos: ").concat(this.queue[a].pos),q,256),this.index=Math.max(a-1,0),t.abrupt("return",BigInt(0));case 10:return t.abrupt("return",BigInt(x.LR));case 11:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i){return r.apply(this,arguments)})},{key:"getAnalyzeStreamsCount",value:function(){return 1}}]),e}(m.A)},54825:(t,e,r)=>{function n(t){if(!(t=t.trim()))return-BigInt(1);var e=t.split(":"),r=BigInt(0);return 3===e.length&&(r+=BigInt(+e.shift().trim())*BigInt(36e5)),r+=BigInt(+e.shift().trim())*BigInt(6e4),e=e.shift().trim().split("."),(r+=BigInt(+e.shift().trim())*BigInt(1e3))+BigInt(+e.shift().trim())}function i(t){if(!(t=t.trim()))return-BigInt(1);var e=t.split(":"),r=BigInt(0);return 3===e.length&&(r+=BigInt(+e.shift().trim())*BigInt(36e5)),r+=BigInt(+e.shift().trim())*BigInt(6e4),e=e.shift().trim().split(","),(r+=BigInt(+e.shift().trim())*BigInt(1e3))+BigInt(+e.shift().trim())}r.d(e,{j:()=>n,t:()=>i})}}]);