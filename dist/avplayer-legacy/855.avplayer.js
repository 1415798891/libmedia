(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[855],{64436:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(78716),n=r(81570),i=r(134),s=r(63939),o=r(37837),c=r(71766),u=function(){function e(){(0,a.A)(this,e),(0,i.A)(this,"inCodecpar",void 0),(0,i.A)(this,"inTimeBase",void 0),(0,i.A)(this,"outCodecpar",void 0)}return(0,n.A)(e,[{key:"init",value:function(e,t){return this.inCodecpar=(0,o.Gy)(168),(0,c.Yi)(this.inCodecpar,e),this.inTimeBase={den:s.f[15](t+4),num:s.f[15](t)},0}},{key:"destroy",value:function(){this.inCodecpar&&((0,c.dn)(this.inCodecpar),this.inCodecpar=0)}}]),e}()},51113:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var a=r(88435),n=r.n(a),i=r(78716),s=r(81570),o=r(77193),c=r(43070),u=r(60394),h=r(25767),f=r(31060),d=r(134),l=r(63939),p=r(50932),v=r(64436),b=r(14686),g=r(4624),y=r(9705),U=r(77231),x=r(44328),m=r(37837),k=r(71517),A=r(87771),w=r(92647),I=r(67672);function _(e,t,r){return t=(0,h.A)(t),(0,o.A)(e,B()?n()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function B(){try{var e=!Boolean.prototype.valueOf.call(n()(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}var P=function(e){function t(){var e;(0,i.A)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=_(this,t,[].concat(a)),(0,d.A)((0,c.A)(e),"caches",void 0),(0,d.A)((0,c.A)(e),"cache",void 0),(0,d.A)((0,c.A)(e),"lastDts",void 0),e}return(0,f.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,u.A)((0,h.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],0}},{key:"sendAVPacket",value:function(e){var t=0,r=this.lastDts||l.f[17](e+16)||l.f[17](e+8),a=(0,b.s3)(l.f[20](e+24),l.f[15](e+28)).slice(),n=!1,i=!!this.cache;for(i&&(a=(0,w.A)(Uint8Array,[this.cache,a]),this.cache=null);t<a.length;){var s=A.R(a.subarray(t));if(I.ai(s))return g.z3("parse ac3 header failed","src/avformat/bsf/ac3/Ac32RawFilter.ts",78),y.LR;var o={dts:r,buffer:null,duration:U.N_},c=s.frameSize;if(o.buffer=a.subarray(t,t+c),t+c>a.length){this.cache=a.subarray(t),this.lastDts=r;break}var u=(0,x.k)(BigInt(1536/s.sampleRate*U.SF),U.KR,this.inTimeBase);o.duration=Number(u),this.caches.push(o),t+=c,r+=u,!n&&i&&(n=!0,r=l.f[17](e+16)||l.f[17](e+8))}return this.lastDts=BigInt(0),0}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,k.Up)(e);var t=this.caches.shift(),r=(0,m.sY)(t.buffer.length);return(0,b.lW)(r,t.buffer.length,t.buffer),(0,k.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[17](e+48,BigInt(Math.floor(t.duration))),p.M[15](e+36,1|l.f[15](e+36)),0}return y.LT}},{key:"reset",value:function(){return this.cache=null,this.lastDts=BigInt(0),0}}]),t}(v.A)},7309:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var a=r(88435),n=r.n(a),i=r(78716),s=r(81570),o=r(77193),c=r(43070),u=r(60394),h=r(25767),f=r(31060),d=r(134),l=r(63939),p=r(50932),v=r(64436),b=r(14686),g=r(4624),y=r(9705),U=r(77231),x=r(44328),m=r(37837),k=r(71517),A=r(29347),w=r(92647),I=r(67672);function _(e,t,r){return t=(0,h.A)(t),(0,o.A)(e,B()?n()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function B(){try{var e=!Boolean.prototype.valueOf.call(n()(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}var P=function(e){function t(){var e;(0,i.A)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=_(this,t,[].concat(a)),(0,d.A)((0,c.A)(e),"caches",void 0),(0,d.A)((0,c.A)(e),"cache",void 0),(0,d.A)((0,c.A)(e),"lastDts",void 0),e}return(0,f.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,u.A)((0,h.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],0}},{key:"sendAVPacket",value:function(e){var t=0,r=this.lastDts||l.f[17](e+16)||l.f[17](e+8),a=(0,b.s3)(l.f[20](e+24),l.f[15](e+28)).slice(),n=!1,i=!!this.cache;for(i&&(a=(0,w.A)(Uint8Array,[this.cache,a]),this.cache=null);t<a.length;){var s=A.R(a.subarray(t));if(I.ai(s))return g.z3("parse dts header failed","src/avformat/bsf/dts/Dts2RawFilter.ts",78),y.LR;var o={dts:r,buffer:null,duration:U.N_},c=s.frameSize;if(o.buffer=a.subarray(t,t+c),t+c>a.length){this.cache=a.subarray(t),this.lastDts=r;break}var u=(0,x.k)(BigInt(1536/s.sampleRate*U.SF),U.KR,this.inTimeBase);o.duration=Number(u),this.caches.push(o),t+=c,r+=u,!n&&i&&(n=!0,r=l.f[17](e+16)||l.f[17](e+8))}return this.lastDts=BigInt(0),0}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,k.Up)(e);var t=this.caches.shift(),r=(0,m.sY)(t.buffer.length);return(0,b.lW)(r,t.buffer.length,t.buffer),(0,k.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[17](e+48,BigInt(Math.floor(t.duration))),p.M[15](e+36,1|l.f[15](e+36)),0}return y.LT}},{key:"reset",value:function(){return this.cache=null,this.lastDts=BigInt(0),0}}]),t}(v.A)},56397:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var a=r(88435),n=r.n(a),i=r(78716),s=r(81570),o=r(77193),c=r(43070),u=r(60394),h=r(25767),f=r(31060),d=r(134),l=r(63939),p=r(50932),v=r(64436),b=r(14686),g=r(4624),y=r(9705),U=r(77231),x=r(44328),m=r(37837),k=r(71517),A=r(75294),w=r(89088),I=r(92647);function _(e,t,r){return t=(0,h.A)(t),(0,o.A)(e,B()?n()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function B(){try{var e=!Boolean.prototype.valueOf.call(n()(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}var P=function(e){function t(){var e;(0,i.A)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=_(this,t,[].concat(a)),(0,d.A)((0,c.A)(e),"frameHeader",void 0),(0,d.A)((0,c.A)(e),"caches",void 0),(0,d.A)((0,c.A)(e),"cache",void 0),(0,d.A)((0,c.A)(e),"lastDts",void 0),e}return(0,f.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,u.A)((0,h.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],this.frameHeader=new A.FrameHeader,0}},{key:"sendAVPacket",value:function(e){var t=0,r=this.lastDts||l.f[17](e+16)||l.f[17](e+8),a=(0,b.s3)(l.f[20](e+24),l.f[15](e+28)).slice(),n=!1,i=!!this.cache;for(i&&(a=(0,I.A)(Uint8Array,[this.cache,a]),this.cache=null);t<a.length;){var s=a[t]<<4|a[t+1]>>4&14;if(4094!==s)return g.z3("found syncWord not 0xFFE, got: 0x".concat(s.toString(16)),"src/avformat/bsf/mp3/Mp32RawFilter.ts",83),y.LR;var o=a[1]>>>3&3,c=(12&a[2])>>>2,u={dts:r,buffer:null,extradata:null,duration:U.N_},h=w.Y2(o,c);A.parse(this.frameHeader,a[t]<<24|a[t+1]<<16|a[t+2]<<8|a[t+3]);var f=A.getFrameLength(this.frameHeader,h);if(u.buffer=a.subarray(t,t+f),t+f>a.length){this.cache=a.subarray(t),this.lastDts=r;break}var d=(0,x.k)(BigInt(Math.floor(f/h*U.SF)),U.KR,this.inTimeBase);u.duration=Number(d),this.caches.push(u),t+=f,r+=d,!n&&i&&(n=!0,r=l.f[17](e+16)||l.f[17](e+8))}return this.lastDts=BigInt(0),0}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,k.Up)(e);var t=this.caches.shift(),r=(0,m.sY)(t.buffer.length);return(0,b.lW)(r,t.buffer.length,t.buffer),(0,k.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[17](e+48,BigInt(Math.floor(t.duration))),p.M[15](e+36,1|l.f[15](e+36)),0}return y.LT}},{key:"reset",value:function(){return this.cache=null,this.lastDts=BigInt(0),0}}]),t}(v.A)},58469:(e,t,r)=>{"use strict";r.d(t,{Bq:()=>d,Ij:()=>f,XC:()=>h,f7:()=>l,uF:()=>s});var a=r(134),n=r(77231),i=r(37246),s=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},1,"Main"),2,"LC"),3,"LC"),4,"LC"),5,"HE"),6,"HE"),o={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,n.N_,n.N_,n.N_],u=[n.N_,1,2,3,4,5,6,7];function h(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t){var r=function(e){var t,r,a=n.N_,i=n.N_,s=n.N_;return e.length>=2&&(a=e[0]>>3&31,i=null!==(t=c[(7&e[0])<<1|e[1]>>7])&&void 0!==t?t:48e3,s=null!==(r=u[e[1]>>3&15])&&void 0!==r?r:2),{profile:a,sampleRate:i,channels:s}}(t),a=r.profile,i=r.sampleRate,s=r.channels;e.codecpar.profile=a,e.codecpar.sampleRate=i,e.codecpar.chLayout.nbChannels=s}}function f(e){var t=o[e.sampleRate],r=e.chLayout.nbChannels,a=new Uint8Array(2);return a[0]=(31&e.profile)<<3|(14&t)>>1,a[1]=(1&t)<<7|(15&r)<<3,a}function d(e){if(e.length<7)return-1;var t=e[0]<<4|e[1]>>4;if(4095!==t)return-1;var r=1&e[1],a=(192&e[2])>>>6,n=(60&e[2])>>>2,i=(1&e[2])<<2|(192&e[3])>>>6,s=(3&e[3])<<11|e[4]<<3|(224&e[5])>>>5,o=3&e[6],h=1===r?7:9,f=s-h;return{syncWord:t,profile:a+1,sampleRate:c[n],channels:u[i],aacFrameLength:s,numberOfRawDataBlocksInFrame:o,headerLength:h,framePayloadLength:f}}function l(e,t){function r(){for(var e=t.readU(2),r=0,a=0;a<=e;a++)r<<=8,r|=t.readU(8);return r}t||(t=new i.A).appendBuffer(e);var a=t.getPos(),n={syncWord:0,profile:0,sampleRate:0,channels:0,useSameStreamMux:!1,headerLength:0,framePayloadLength:0,muxLengthBytes:0},s=t.readU(11);if(695!==s)return-1;n.syncWord=s,n.muxLengthBytes=t.readU(13);var o=1===t.readU1();if(n.useSameStreamMux=o,!o){var h=1===t.readU1();if(h&&1===t.readU1())return-1;if(h&&r(),1!==t.readU1())return-1;if(0!==t.readU(6))return-1;if(0!==t.readU(4))return-1;if(0!==t.readU(3))return-1;var f=h?r():0,d=t.readU(5);f-=5;var l=t.readU(4);f-=4;var p=t.readU(4);if(f-=4,t.readU(3),(f-=3)>0&&t.readU(f),0!==t.readU(3))return-1;if(t.readU(8),1===t.readU1())if(h)r();else for(;;){var v=1===t.readU1();if(t.readU(8),!v)break}1===t.readU1()&&t.readU(8),n.profile=d+1,n.sampleRate=c[l],n.channels=u[p]}for(var b=0;;){var g=t.readU(8);if(b+=g,255!==g)break}return n.framePayloadLength=b,n.headerLength=t.getPos()-a+(8===t.getBitLeft()?0:1),n}},87771:(e,t,r)=>{"use strict";r.d(t,{R:()=>l,j:()=>n});var a=r(37246),n=[3,4,3,7,259,263,1539,1543],i=[[64,69,96],[64,70,96],[80,87,120],[80,88,120],[96,104,144],[96,105,144],[112,121,168],[112,122,168],[128,139,192],[128,140,192],[160,174,240],[160,175,240],[192,208,288],[192,209,288],[224,243,336],[224,244,336],[256,278,384],[256,279,384],[320,348,480],[320,349,480],[384,417,576],[384,418,576],[448,487,672],[448,488,672],[512,557,768],[512,558,768],[640,696,960],[640,697,960],[768,835,1152],[768,836,1152],[896,975,1344],[896,976,1344],[1024,1114,1536],[1024,1115,1536],[1152,1253,1728],[1152,1254,1728],[1280,1393,1920],[1280,1394,1920]],s=[4,5,6,5],o=[4,6,7,6],c=[48e3,44100,32e3,0],u=[32,40,48,56,64,80,96,112,128,160,192,224,256,320,384,448,512,576,640],h=[2,1,2,3,3,4,4,5],f=[1,2,3,6],d=7;function l(e){var t=new a.A(size);t.appendBuffer(e);var r={syncWord:0,crc1:0,srCode:0,bitstreamId:0,bitstreamMode:0,channelMode:0,lfeOn:0,frameType:0,substreamId:0,centerMixLevel:0,surroundMixLevel:0,channelMap:0,numBlocks:0,dolbySurroundMode:0,srShift:0,sampleRate:0,bitrate:0,channels:0,frameSize:0,channelLayout:BigInt(0),ac3BitrateCode:0};if(r.syncWord=t.readU(16),2935!==r.syncWord)return-1;if(r.bitstreamId=31&t.readU(29),r.bitstreamId>16)return-2;if(r.numBlocks=6,r.ac3BitrateCode=-1,r.centerMixLevel=5,r.surroundMixLevel=6,r.dolbySurroundMode=0,r.bitstreamId<=10){if(r.crc1=t.readU(16),r.srCode=t.readU(2),3===r.srCode)return-3;var l=t.readU(6);if(l>37)return-4;r.ac3BitrateCode=l>>1,t.readU(5),r.bitstreamMode=t.readU(3),r.channelMode=t.readU(3),2==r.channelMode?r.dolbySurroundMode=t.readU(2):(1&r.channelMode&&1!=r.channelMode&&(r.centerMixLevel=s[t.readU(2)]),4&r.channelMode&&(r.surroundMixLevel=o[t.readU(2)])),r.lfeOn=t.readU(1),r.srShift=Math.max(r.bitstreamId,8)-8,r.sampleRate=c[r.srCode]>>r.srShift,r.bitrate=1e3*u[r.ac3BitrateCode]>>r.srShift,r.channels=h[r.channelMode]+r.lfeOn,r.frameSize=2*i[l][r.srCode],r.frameType=2,r.substreamId=0}else{if(r.crc1=0,r.frameType=t.readU(2),3==r.frameType)return-5;if(r.substreamId=t.readU(3),r.frameSize=t.readU(11)+1<<1,r.frameSize<d)return-6;if(r.srCode=t.readU(2),3==r.srCode){var p=t.readU(2);if(3==p)return-7;r.sampleRate=c[p]/2,r.srShift=1}else r.numBlocks=f[t.readU(2)],r.sampleRate=c[r.srCode],r.srShift=0;r.channelMode=t.readU(3),r.lfeOn=t.readU(1),r.bitrate=8*r.frameSize*r.sampleRate/(256*r.numBlocks),r.channels=h[r.channelMode]+r.lfeOn}return r.channelLayout=BigInt.asUintN(64,n[r.channelMode]),r.lfeOn&&(r.channelLayout|=BigInt(8)),r}},29347:(e,t,r)=>{"use strict";r.d(t,{R:()=>o});var a=r(37246),n=[1,2,2,2,2,3,3,4,4,5,6,6,6,7,8,8],i=[0,8e3,16e3,32e3,0,0,11025,22050,44100,0,0,12e3,24e3,48e3,0,0],s=[32e3,56e3,64e3,96e3,112e3,128e3,192e3,224e3,256e3,32e4,384e3,448e3,512e3,576e3,64e4,768e3,96e4,1024e3,1152e3,128e4,1344e3,1408e3,1411200,1472e3,1536e3,192e4,2048e3,3072e3,384e4,0,0,0];function o(e){var t=new a.A(size);t.appendBuffer(e);var r={syncWord:0,frameType:0,sampleCount:0,crcFlag:0,sampleBlock:0,frameSize:0,channelIndex:0,sampleRateIndex:0,bitrateIndex:0,channels:0,sampleRate:0,bitrate:0};return r.syncWord=t.readU(32),2147385345!==r.syncWord?-1:(r.frameType=t.readU1(),r.sampleCount=t.readU(5),r.crcFlag=t.readU1(),r.sampleBlock=t.readU(7),r.frameSize=t.readU(14),r.channelIndex=t.readU(6),r.sampleRateIndex=t.readU(4),r.bitrateIndex=t.readU(5),r.channels=n[r.channelIndex],r.sampleRate=i[r.sampleRateIndex],r.bitrate=s[r.bitrateIndex],r)}},20620:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>w,KD:()=>B,MB:()=>x,S1:()=>k,XC:()=>_,ci:()=>I,oT:()=>A,tZ:()=>U,wf:()=>P}),r(42096),r(75062),r(16091),r(68632);var a=r(134),n=r(63939),i=r(50932),s=r(72739),o=r(729),c=r(31865),u=r(37246),h=r(4624),f=r(14686),d=r(71517),l=r(60264),p=r(37837),v=r(23991),b=r(39381),g="src/avformat/codecs/h264.ts",y=3,U=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},66,"Constrained Baseline"),77,"Main"),100,"High"),110,"High10"),122,"High422"),244,"High444");function x(e){var t=new c.A(e);t.skip(5);for(var r=[],a=[],n=[],i=31&t.readUint8(),s=0;s<i;s++){var o=t.readUint16();r.push(t.readBuffer(o))}for(var u=t.readUint8(),h=0;h<u;h++){var f=t.readUint16();a.push(t.readBuffer(f))}if(t.remainingSize()>4){t.skip(3);var d=t.readUint8();if(d>0)for(var l=0;l<d;l++){var p=t.readUint16();n.push(t.readBuffer(p))}}return{spss:r,ppss:a,spsExts:n}}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.length>32&&(h.R8("h264 metadata's sps max length is 32, but get ".concat(e.length),g,210),e=e.slice(0,32)),e.length>256&&(h.R8("h264 metadata's pps max length is 256, but get ".concat(e.length),g,214),e=e.slice(0,256));var a=7;a=e.reduce((function(e,t){return e+2+t.length}),a),a=t.reduce((function(e,t){return e+2+t.length}),a);var n=e[0],i=P(n);66!==i.profile&&77!==i.profile&&88!==i.profile&&(a+=4,r.length&&(a=r.reduce((function(e,t){return e+2+t.length}),a)));var c=new Uint8Array(a),u=new o.A(c);return u.writeUint8(1),u.writeUint8(n[1]),u.writeUint8(n[2]),u.writeUint8(n[3]),u.writeUint8(252|y),u.writeUint8(224|31&e.length),s.__(e,(function(e){u.writeUint16(e.length),u.writeBuffer(e)})),u.writeUint8(t.length),s.__(t,(function(e){u.writeUint16(e.length),u.writeBuffer(e)})),66!==i.profile&&77!==i.profile&&88!==i.profile&&(u.writeUint8(252|i.chromaFormatIdc),u.writeUint8(248|i.bitDepthLumaMinus8),u.writeUint8(248|i.bitDepthChromaMinus8),r.length&&s.__(r,(function(e){u.writeUint16(e.length),u.writeBuffer(e)}))),c}function k(e){var t=(0,l.py)(e);if(t.length>1){var r=[],a=[],n=[];if(t.forEach((function(e){var t=31&e[0];7===t?r.push(e):8===t?a.push(e):13===t&&n.push(e)})),r.length&&a.length)return m(r,a,n)}}function A(e){var t,r=(0,l.py)(e),a=!1;if(r.length>1){var n=[],i=[],c=[];r.forEach((function(e){var t=31&e[0];7===t?n.push(e):8===t?i.push(e):13===t&&c.push(e)})),n.length&&i.length&&(t=m(n,i,c)),r=r.filter((function(e){var t=31&e[0];return 9!==t&&8!==t&&7!==t&&13!==t}))}var u=r.reduce((function(e,t){return e+y+1+t.length}),0),h=(0,p.sY)(u),d=(0,f.s3)(h,u),v=new o.A(d);return s.__(r,(function(e){3===y?v.writeUint32(e.length):2===y?v.writeUint24(e.length):1===y?v.writeUint16(e.length):v.writeUint8(e.length),v.writeBuffer(e.subarray(0)),5==(31&e[0])&&(a=!0)})),{bufferPointer:h,length:u,key:a,extradata:t}}function w(e,t){var r;if(1&n.f[15](e+36)){var a=(0,d.iI)(e);if(!(0,l.Bs)(a)){for(var i=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:y,s=[],o=[],u=[],h=[],v=new c.A(a);v.remainingSize()>0;){var b;b=3===i?v.readUint32():2===i?v.readUint24():1===i?v.readUint16():v.readUint8();var g=a.subarray(Number(BigInt.asIntN(32,v.getPos())),Number(BigInt.asIntN(32,v.getPos()))+b);v.skip(b);var U=31&g[0];7===U?s.push(g):8===U?o.push(g):13===U?u.push(g):h.push(g)}if(s.length||o.length){var x=m(s,o,u),k=(0,p.sY)(x.length);(0,f.lW)(k,x.length,x),(0,d.Ow)(e,1,k,x.length)}}}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&n.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,l.Bs)(r)){var a=(0,l.py)(r);if(a.length>1){var s=[],o=[],c=[];if(a.forEach((function(e){var t=31&e[0];7===t?s.push(e):8===t?o.push(e):13===t&&c.push(e)})),s.length&&o.length){var u=m(s,o,c),h=(0,p.sY)(u.length);(0,f.lW)(h,u.length,u),(0,d.Ow)(e,1,h,u.length),i.M[15](e+36,1|n.f[15](e+36))}}}}}function _(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[4];var r=x(t).spss;if(r.length){var a=P(r[0]),n=a.profile,i=a.level,s=a.width,o=a.height;e.codecpar.profile=n,e.codecpar.level=i,e.codecpar.width=s,e.codecpar.height=o}}}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(2===n.f[15](e+80))return(0,l.py)((0,f.s3)(n.f[20](e+24),n.f[15](e+28))).some((function(e){return 5==(31&e[0])}));for(var r=n.f[15](e+28),a=0;a<r-t;){if(5==(31&b.r8(n.f[20](e+24)+(a+t))))return!0;a+=4===t?b.Sg(n.f[20](e+24)+a):3===t?b.ht(n.f[20](e+24)+a):2===t?b.yd(n.f[20](e+24)+a):b.r8(n.f[20](e+24)+a),a+=t}return!1}function P(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=(0,l.BN)(e.subarray(t)),a=new u.A(r.length);a.appendBuffer(r),a.readU1(),a.readU(2),a.readU(5);var n=a.readU(8);a.readU1(),a.readU1(),a.readU1(),a.readU1(),a.readU1(),a.readU1(),a.readU(2);var i=a.readU(8);v.xb(a);var s=1,o=0,c=0;if((100==n||110==n||122==n||244==n||44==n||83==n||86==n||118==n||128==n||138==n||139==n||134==n||135==n)&&(3===(s=v.xb(a))&&a.readU1(),o=v.xb(a),c=v.xb(a),a.readU1(),a.readU1()))for(var h=new Array(8),f=0;f<(3!=s?8:12);f++)h[f]=a.readU1();var d=v.xb(a),p=v.xb(a),b=0,g=0;if(0===p)b=v.xb(a);else if(1===p){g=a.readU1(),v.$x(a),v.$x(a);for(var y=v.xb(a),U=0;U<y;U++)v.$x(a)}v.xb(a),a.readU1();var x=v.xb(a),m=v.xb(a),k=a.readU1(),A=16*(x+1),w=(2-k)*(m+1)*16;k||a.readU1(),a.readU1();var I=a.readU1();if(I){var _=1,B=2-I;1===s?(_=2,B=2*(2-I)):2===I&&(_=2,B=2-I),A-=_*(v.xb(a)+v.xb(a)),w-=B*(v.xb(a)+v.xb(a))}return{profile:n,level:i,width:A,height:w,chromaFormatIdc:s,bitDepthLumaMinus8:o,bitDepthChromaMinus8:c,frameMbsOnlyFlag:k,picOrderCntType:p,log2MaxPicOrderCntLsbMinus4:b,deltaPicOrderAlwaysZeroFlag:g,log2MaxFrameNumMinus4:d}}}},53e3:(e,t,r)=>{"use strict";r.d(t,{HL:()=>y,Jk:()=>k,KD:()=>I,S1:()=>x,XC:()=>w,ZU:()=>B,ci:()=>A,dT:()=>b,oT:()=>m,wf:()=>_}),r(42096),r(75062),r(16091),r(68632);var a=r(134),n=r(63939),i=r(50932),s=r(72739),o=r(729),c=r(31865),u=r(37246),h=r(14686),f=r(60264),d=r(71517),l=r(37837),p=r(23991),v=r(39381),b=(0,a.A)((0,a.A)((0,a.A)((0,a.A)({},1,"Main"),2,"Main10"),3,"MainStillPicture"),4,"Main444"),g=3;function y(e){var t=new c.A(e,!0);t.skip(22);for(var r=[],a=[],n=[],i=t.readUint8(),s=0;s<i;s++){for(var o=63&t.readUint8(),u=t.readUint16(),h=[],f=0;f<u;f++){var d=t.readUint16();h.push(t.readBuffer(d))}32===o?r=h:33===o?a=h:34===o&&(n=h)}return{vpss:r,spss:a,ppss:n}}function U(e,t,r){var a=t[0],n=23;e.length&&(n+=3,n=e.reduce((function(e,t){return e+2+t.length}),n)),t.length&&(n+=3,n=t.reduce((function(e,t){return e+2+t.length}),n)),r.length&&(n+=3,n=r.reduce((function(e,t){return e+2+t.length}),n));var i=new Uint8Array(n),c=new o.A(i,!0),u=_(a);c.writeUint8(1),c.writeUint8(a[1]),c.writeUint8(a[2]),c.writeUint8(a[3]),c.writeUint8(a[4]),c.writeUint8(a[5]),c.writeUint8(a[6]),c.writeUint8(a[7]),c.writeUint8(a[8]),c.writeUint8(a[9]),c.writeUint8(a[10]),c.writeUint8(a[11]),c.writeUint8(u.level),c.writeUint8(1020),c.writeUint8(0),c.writeUint8(16320),c.writeUint8(16320|u.chroma_format_idc),c.writeUint8(8160|u.bit_depth_luma_minus8),c.writeUint8(8160|u.bit_depth_chroma_minus8),c.writeUint16(0),c.writeUint8(8|(1&a[0])<<2|g);var h=0;return e.length&&h++,t.length&&h++,r.length&&h++,c.writeUint8(h),e.length&&(c.writeUint8(160),c.writeUint16(e.length),s.__(e,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),t.length&&(c.writeUint8(161),c.writeUint16(t.length),s.__(t,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),r.length&&(c.writeUint8(162),c.writeUint16(r.length),s.__(r,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),i}function x(e){var t=(0,f.py)(e);if(t.length>=2){var r=[],a=[],n=[];if(t.forEach((function(e){var t=e[0]>>>1&63;32===t?r.push(e):33===t?a.push(e):34===t&&n.push(e)})),a.length&&n.length)return U(r,a,n)}}function m(e){var t,r=!1,a=(0,f.py)(e);if(a.length>=2){var n=[],i=[],c=[];a.forEach((function(e){var t=e[0]>>>1&63;32===t?n.push(e):33===t?i.push(e):34===t&&c.push(e)})),i.length&&c.length&&(t=U(n,i,c),a=a.filter((function(e){var t=e[0]>>>1&63;return 32!==t&&33!==t&&34!==t&&35!==t})))}var u=a.reduce((function(e,t){return e+g+1+t.length}),0),d=(0,l.sY)(u),p=(0,h.s3)(d,u),v=new o.A(p);return s.__(a,(function(e){3===g?v.writeUint32(e.length):2===g?v.writeUint24(e.length):1===g?v.writeUint16(e.length):v.writeUint8(e.length),v.writeBuffer(e.subarray(0));var t=e[0]>>>1&63;19!==t&&20!==t&&21!==t||(r=!0)})),{bufferPointer:d,length:u,extradata:t,key:r}}function k(e,t){var r;if(1&n.f[15](e+36)){var a=(0,d.iI)(e);if(!(0,f.Bs)(a)){for(var i=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:g,s=[],o=[],u=[],p=new c.A(a);p.remainingSize()>0;){var v;v=3===i?p.readUint32():2===i?p.readUint24():1===i?p.readUint16():p.readUint8();var b=a.subarray(Number(BigInt.asIntN(32,p.getPos())),Number(BigInt.asIntN(32,p.getPos()))+v);p.skip(v);var y=b[0]>>>1&63;33===y?o.push(b):34===y?u.push(b):32===y&&s.push(b)}if(o.length||u.length||s.length){var x=U(s,o,u),m=(0,l.sY)(x.length);(0,h.lW)(m,x.length,x),(0,d.Ow)(e,1,m,x.length)}}}}function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&n.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,f.Bs)(r)){var a=(0,f.py)(r);if(a.length>2){var s=[],o=[],c=[];if(a.forEach((function(e){var t=e[0]>>>1&63;32===t?s.push(e):33===t?o.push(e):34===t&&c.push(e)})),s.length&&o.length&&c.length){var u=U(s,o,c),p=(0,l.sY)(u.length);(0,h.lW)(p,u.length,u),(0,d.Ow)(e,1,p,u.length),i.M[15](e+36,1|n.f[15](e+36))}}}}}function w(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[21];var r=y(t).spss;if(r.length){var a=_(r[0]),n=a.profile,i=a.level,s=a.width,o=a.height;e.codecpar.profile=n,e.codecpar.level=i,e.codecpar.width=s,e.codecpar.height=o}}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(2===n.f[15](e+80))return(0,f.py)((0,h.s3)(n.f[20](e+24),n.f[15](e+28))).some((function(e){var t=e[0]>>>1&63;return 20===t||19===t}));for(var r=n.f[15](e+28),a=0;a<r-t;){var i=v.r8(n.f[20](e+24)+(a+t))>>>1&63;if(20===i||19===i)return!0;a+=4===t?v.Sg(n.f[20](e+24)+a):3===t?v.ht(n.f[20](e+24)+a):2===t?v.yd(n.f[20](e+24)+a):v.r8(n.f[20](e+24)+a),a+=t}return!1}function _(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=0,a=0,n=0,i=0,s=0,o=0,c=1,h=0,d=0,l=0,v=0,b=(0,f.BN)(e.subarray(t)),g=new u.A(b.length);g.appendBuffer(b),g.readU1(),g.readU(6),g.readU(6),g.readU(3),g.readU(4);var y=g.readU(3);g.readU1();var U=0;if(y<=6){h=g.readU(2),d=g.readU1(),r=g.readU(5),l=g.readU(32),v=g.readU(48),a=g.readU(8);for(var x=new Array(6),m=new Array(6),k=0;k<y;k++)x[k]=g.readU1(),m[k]=g.readU1();if(y>0)for(var A=y;A<8;A++)g.readU(2);for(var w=0;w<y;w++)x[w]&&(g.readU(2),g.readU(1),g.readU(5),g.readU(32),g.readU(1),g.readU(1),g.readU(1),g.readU(1),g.readU(44)),m[w]&&g.readU(8);p.xb(g),3===(c=p.xb(g))&&(U=g.readU(1)),n=p.xb(g),i=p.xb(g);var I=0,_=0,B=0,P=0;g.readU1()&&(I=p.xb(g),_=p.xb(g),B=p.xb(g),P=p.xb(g)),s=p.xb(g),o=p.xb(g);var S=2,M=2;0===c?S=M=0:2===c?(S=2,M=1):3===c&&(S=M=1),n-=S*(1<<s+1)*(I+_),i-=M*(1<<s+1)*(B+P)}for(var R=p.xb(g)+4,L=g.readU1()?0:y;L<y+1;L++)p.xb(g),p.xb(g),p.xb(g);var z=p.xb(g)+3,D=p.xb(g),C=p.xb(g)+2,F=p.xb(g),E=z+D,N=z-1,T=n+(1<<E)-1>>E,O=i+(1<<E)-1>>E;return{profile:r,level:a,width:n,height:i,chroma_format_idc:c,bit_depth_luma_minus8:s,bit_depth_chroma_minus8:o,general_profile_space:h,general_tier_flag:d,general_profile_compatibility_flags:l,constraint_flags:v,separate_colour_plane_flag:U,log2_min_cb_size:z,log2_diff_max_min_coding_block_size:D,log2_min_tb_size:C,log2_diff_max_min_transform_block_size:F,log2_max_trafo_size:F+C,log2_ctb_size:E,log2_min_pu_size:N,ctb_width:T,ctb_height:O,ctb_size:T*O,min_cb_width:n>>z,min_cb_height:i>>z,min_tb_width:n>>C,min_tb_height:i>>C,min_pu_width:n>>N,min_pu_height:i>>N,log2_max_poc_lsb:R}}}function B(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=(0,f.BN)(e.subarray(t)),a=new u.A(r.length);return a.appendBuffer(r),{pps_pic_parameter_set_id:p.xb(a),pps_seq_parameter_set_id:p.xb(a),dependent_slice_segment_flag:a.readU1(),output_flag_present_flag:a.readU1(),num_extra_slice_header_bits:a.readU(3)}}}},89088:(e,t,r)=>{"use strict";r.d(t,{Au:()=>U,He:()=>x,XC:()=>m,Y2:()=>b,hG:()=>g,oz:()=>y});var a=r(134),n=r(77231),i=[44100,48e3,32e3,0],s=[22050,24e3,16e3,0],o=[11025,12e3,8e3,0],c=[0,1152,1152,384],u=[0,576,1152,384],h=[0,576,1152,384],f=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],d=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],l=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],p=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],v=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function b(e,t){switch(e){case 0:return o[t];case 2:return s[t];case 3:return i[t]}return n.N_}function g(e,t){switch(e){case 0:return h[t];case 2:return u[t];case 3:return c[t]}return n.N_}function y(e,t,r){switch(t){case 1:switch(e){case 0:case 2:return v[r];case 3:return l[r]}break;case 2:switch(e){case 0:case 2:return v[r];case 3:return d[r]}case 3:switch(e){case 0:case 2:return p[r];case 3:return f[r]}}return n.N_}function U(e){switch(e){case 1:return 34;case 2:return 33;case 3:return 32}return n.N_}var x=(0,a.A)((0,a.A)((0,a.A)({},32,"Layer1"),33,"Layer2"),34,"Layer3");function m(e,t){if(t&&t.length>=4){var r=t[1]>>>3&3,a=(6&t[1])>>1,n=(12&t[2])>>>2,i=3&~(t[3]>>>6)?2:1,s=U(a),o=b(r,n);e.codecpar.profile=s,e.codecpar.sampleRate=o,e.codecpar.chLayout.nbChannels=i}}},25906:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});var a=r(71517);function n(e){for(var t=(0,a.iI)(e),r=0;r<t.length-6;r++)if(0===t[r]&&0===t[r+1]&&1===t[r+2]&&0===t[r+3])return 1==(t[r+5]>>3&7);return!1}},65451:(e,t,r)=>{"use strict";r.d(t,{Ij:()=>u,XC:()=>c,kt:()=>o});var a=r(31865),n=r(729),i=r(44328),s=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function o(e){var t,r,a=0;if(e.length<1)return 0;switch(t=e[0],r=s[t>>3],3&t){case 0:a=1;break;case 1:case 2:a=2;break;case 3:if(e.length<2)return 0;a=63&e[1]}return a*r}function c(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=19){var r=new a.A(t,!1);r.skip(9),e.codecpar.chLayout.nbChannels=r.readUint8(),e.codecpar.initialPadding=r.readUint16(),e.codecpar.sampleRate=r.readUint32(),e.codecpar.seekPreroll=Number((0,i.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function u(e){var t=new Uint8Array(19),r=new n.A(t,!1);return r.writeString("OpusHead"),r.writeUint8(1),r.writeUint8(e.chLayout.nbChannels),r.writeUint16(e.initialPadding),r.writeUint32(e.sampleRate),t}},55611:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>x,KD:()=>w,QA:()=>k,Ui:()=>_,XC:()=>A,ci:()=>m,oT:()=>U,wf:()=>I});var a=r(63939),n=r(50932),i=r(72739),s=r(729),o=r(31865),c=r(37246),u=r(14686),h=r(60264),f=r(71517),d=r(37837),l=r(23991),p=r(83314),v=r(39381),b=3;function g(e){var t=e.readU(9),r=e.readU(3),a=e.readU(2),n=e.readU(2),i=e.readU(3);e.readU(5),e.readU(2);var s=e.readU(6),o=e.readU(7),c=e.readU(1),u=e.readU(8),h=e.readU(1),f=e.readU(1),d=[],l=[];if(s){for(var p=0;p<s-1;p++)d[p]=e.readU(8);d[s-1]=e.readU(6)}else e.readU(6);if(r>1){for(var v=0,b=r-2;b>=0;--b)v|=e.readU(1)<<b;for(var g=r;g<=8&&r>1;++g)e.readU(1);for(var y=r-2;y>=0;--y)v&1<<y&&(l[y]=e.readU(8))}var U=e.readU(8),x=[];if(U)for(var m=0;m<U;m++)x.push(e.readU(8));return{olsIdx:t,numSublayers:r,bitDepthMinus8:i,chromaFormatIdc:n,constantFrameRate:a,generalProfileIdc:o,generalTierFlag:c,generalLevelIdc:u,ptlFrameOnlyConstraintFlag:h,ptlMultilayerEnabledFlag:f,generalConstraintInfo:d,sublayerLevelIdc:l,generalSubProfileIdc:x,maxPictureWidth:e.readU(16),maxPictureHeight:e.readU(16),avgFramerate:e.readU(16)}}function y(e,t,r){var a,n=t[0];if(n){var o=I(n),c=o.generalConstraintInfo;c.length||(c=new Array(12).fill(0));var u=new p.A;if(u.writeU(9,0),u.writeU(3,o.spsMaxSublayersMinus1+1),u.writeU(2,1),u.writeU(2,o.chromaFormatIdc),u.writeU(3,o.bitDepthMinus8),u.writeU(5,31),u.writeU(2,0),u.writeU(6,c.length),u.writeU(7,o.profile),u.writeU1(o.tierFlag),u.writeU(8,o.level),u.writeU1(o.ptlFrameOnlyConstraintFlag),u.writeU1(o.ptlMultilayerEnabledFlag),c.length){for(var h=0;h<c.length-1;h++)u.writeU(8,c[h]);u.writeU(6,c[c.length-1])}else u.writeU(6,63);if(o.spsMaxSublayersMinus1+1>1){for(var f=0,d=o.spsMaxSublayersMinus1-1;d>=0;d--)f=f<<1|o.ptlSublayerLevelPresentFlag[d];u.writeU(o.spsMaxSublayersMinus1,f);for(var l=o.spsMaxSublayersMinus1+1;l<=8&&o.spsMaxSublayersMinus1>0;++l)u.writeU1(0);for(var v=o.spsMaxSublayersMinus1-1;v>=0;v--)o.ptlSublayerLevelPresentFlag[v]&&u.writeU(8,o.sublayerLevelIdc[v])}u.writeU(8,o.generalSubProfileIdc.length);for(var g=0;g<o.generalSubProfileIdc.length;g++)u.writeU(8,o.sublayerLevelIdc[g]);u.writeU(16,o.width),u.writeU(16,o.height),u.writeU(16,0),u.padding(),a=u.getBuffer().subarray(0,u.getPointer())}var y=2+(a?a.length:0);e.length&&(y+=3,y=e.reduce((function(e,t){return e+2+t.length}),y)),t.length&&(y+=3,y=t.reduce((function(e,t){return e+2+t.length}),y)),r.length&&(y+=3,y=r.reduce((function(e,t){return e+2+t.length}),y));var U=new Uint8Array(y),x=new s.A(U,!0);x.writeUint8(b<<1|(a?1:0)|248),a&&x.writeBuffer(a);var m=0;return e.length&&m++,t.length&&m++,r.length&&m++,x.writeUint8(m),e.length&&(x.writeUint8(142),x.writeUint16(e.length),i.__(e,(function(e){x.writeUint16(e.length),x.writeBuffer(e)}))),t.length&&(x.writeUint8(143),x.writeUint16(t.length),i.__(t,(function(e){x.writeUint16(e.length),x.writeBuffer(e)}))),r.length&&(x.writeUint8(144),x.writeUint16(r.length),i.__(r,(function(e){x.writeUint16(e.length),x.writeBuffer(e)}))),U}function U(e){var t,r=!1,a=(0,h.py)(e);if(a.length>=2){var n=[],o=[],c=[];a.forEach((function(e){var t=e[1]>>>3&31;14===t?n.push(e):15===t?o.push(e):16===t&&c.push(e)})),o.length&&c.length&&(t=y(n,o,c),a=a.filter((function(e){var t=e[1]>>>3&31;return 14!==t&&15!==t&&16!==t&&20!==t})))}var f=a.reduce((function(e,t){return e+b+1+t.length}),0),l=(0,d.sY)(f),p=(0,u.s3)(l,f),v=new s.A(p);return i.__(a,(function(e){3===b?v.writeUint32(e.length):2===b?v.writeUint24(e.length):1===b?v.writeUint16(e.length):v.writeUint8(e.length),v.writeBuffer(e.subarray(0));var t=e[1]>>>3&31;8!==t&&7!==t&&9!==t&&10!==t||(r=!0)})),{bufferPointer:l,length:f,extradata:t,key:r}}function x(e,t){var r;if(1&a.f[15](e+36)){var n=(0,f.iI)(e);if(!(0,h.Bs)(n)){for(var i=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:b,s=[],c=[],l=[],p=new o.A(n);p.remainingSize()>0;){var v;v=3===i?p.readUint32():2===i?p.readUint24():1===i?p.readUint16():p.readUint8();var g=n.subarray(Number(BigInt.asIntN(32,p.getPos())),Number(BigInt.asIntN(32,p.getPos()))+v);p.skip(v);var U=g[1]>>>3&31;15===U?c.push(g):16===U?l.push(g):14===U&&s.push(g)}if(c.length||l.length||s.length){var x=y(s,c,l),m=(0,d.sY)(x.length);(0,u.lW)(m,x.length,x),(0,f.Ow)(e,1,m,x.length)}}}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&a.f[15](e+36)||t){var r=(0,f.iI)(e);if((0,h.Bs)(r)){var i=(0,h.py)(r);if(i.length>2){var s=[],o=[],c=[];if(i.forEach((function(e){var t=e[1]>>>3&31;14===t?s.push(e):15===t?o.push(e):16===t&&c.push(e)})),s.length&&o.length&&c.length){var l=y(s,o,c),p=(0,d.sY)(l.length);(0,u.lW)(p,l.length,l),(0,f.Ow)(e,1,p,l.length),n.M[15](e+36,1|a.f[15](e+36))}}}}}function k(e,t){var r=I(t),a=r.profile,n=r.level,i=r.width,s=r.height;e.codecpar.profile=a,e.codecpar.level=n,e.codecpar.width=i,e.codecpar.height=s}function A(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=t[0]>>>1&3;var r=function(e){var t=new o.A(e,!0);if(1&t.readUint8()){var r=new c.A;r.appendBuffer(e.subarray(1)),g(r),t.skip(r.getPos())}for(var a=[],n=[],i=[],s=t.readUint8(),u=0;u<s;u++){var h=31&t.readUint8(),f=1;13!==h&&12!==h&&(f=t.readUint16());for(var d=[],l=0;l<f;l++){var p=t.readUint16();d.push(t.readBuffer(p))}14===h?a=d:15===h?n=d:16===h&&(i=d)}return{vpss:a,spss:n,ppss:i}}(t).spss;r.length&&k(e,r[0])}}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(2===a.f[15](e+80))return(0,h.py)((0,u.s3)(a.f[20](e+24),a.f[15](e+28))).some((function(e){var t=e[1]>>>3&31;return 8===t||7===t}));for(var r=a.f[15](e+28),n=0;n<r-t;){var i=v.r8(a.f[20](e+24)+(n+t+1))>>>3&31;if(8===i||7===i)return!0;n+=4===t?v.Sg(a.f[20](e+24)+n):3===t?v.ht(a.f[20](e+24)+n):2===t?v.yd(a.f[20](e+24)+n):v.r8(a.f[20](e+24)+n),n+=t}return!1}function I(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r,a,n,i,s=0,o=0,u=0,f=0,d=0,p=[],v=[],b=[],g=[],y=(0,h.BN)(e.subarray(t)),U=new c.A(y.length);U.appendBuffer(y),U.readU1(),U.readU1(),U.readU(6),U.readU(5),U.readU(3),U.readU(8);var x=U.readU(3);i=U.readU(2);var m=U.readU(2);if(U.readU(1)){if(s=U.readU(7),u=U.readU(1),o=U.readU(8),f=U.readU(1),d=U.readU(1),U.readU(1)){for(var k=0;k<8;k++)p[k]=U.readU(8);p[8]=U.readU(7);var A=U.readU(8);U.readU(A)}U.skipPadding();for(var w=x-1;w>=0;w--)v[w]=U.readU(1);U.skipPadding();for(var I=x-1;I>=0;I--)v[I]&&(b[I]=U.readU(8));var _=U.readU(8);if(_)for(var B=0;B<_;B++)g[B]=U.readU(32)}U.readU1(),U.readU1()&&U.readU1();var P=r=l.xb(U),S=a=l.xb(U);if(U.readU1()&&(l.xb(U),l.xb(U),l.xb(U),l.xb(U)),U.readU1()){var M,R=l.xb(U),L=m+5,z=1<<L,D=P/(1<<L),C=S/(1<<L),F=Math.ceil(Math.log2(D)),E=Math.ceil(Math.log2(C)),N=0,T=0;R>0&&(T=U.readU1(),N=U.readU1());for(var O=0;R>0&&O<=R;O++)N&&0!=O||(O>0&&P>z&&U.readU(F),O>0&&S>z&&U.readU(E),O<R&&P>z&&U.readU(F),O<R&&S>z&&U.readU(E)),T||U.readU(2);if(M=l.xb(U)+1,U.readU(1)&&U.readU(1))for(var W=0;W<=R;W++)U.readU(M)}n=l.xb(U),U.readU(1),U.readU(1);var V=U.readU(4),Y=U.readU(1),H=0;Y&&(H=l.xb(U));for(var K=[],X=U.readU(2),J=0;J<8*X;J++)K[J]=U.readU(1);return{profile:s,level:o,width:r,height:a,chromaFormatIdc:i,bitDepthMinus8:n,generalProfileSpace:0,tierFlag:u,generalConstraintInfo:p,generalSubProfileIdc:g,ptlFrameOnlyConstraintFlag:f,ptlMultilayerEnabledFlag:d,spsMaxSublayersMinus1:x,ptlSublayerLevelPresentFlag:v,sublayerLevelIdc:b,sps_log2_max_pic_order_cnt_lsb_minus4:V,sps_poc_msb_cycle_flag:Y,sps_poc_msb_cycle_len_minus1:H,sps_num_extra_ph_bytes:X,sps_extra_ph_bit_present_flag:K}}}function _(e){0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(e=function(e){var t=(0,h.py)(e);if(t.length>=2){var r=[],a=[],n=[];if(t.forEach((function(e){var t=e[1]>>>3&31;14===t?r.push(e):15===t?a.push(e):16===t&&n.push(e)})),a.length&&n.length)return y(r,a,n)}}(e));var t=new c.A;return t.appendBuffer(e),1&t.readU(8)?g(t):{}}},85947:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(78716),n=r(81570),i=r(134),s=r(10754),o=function(){function e(){(0,a.A)(this,e),(0,i.A)(this,"type",s.P.UNKNOWN),(0,i.A)(this,"onStreamAdd",void 0)}return(0,n.A)(e,[{key:"destroy",value:function(e){}}]),e}()},83855:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ee});var a=r(88435),n=r.n(a),i=r(25182),s=r(78716),o=r(81570),c=r(77193),u=r(43070),h=r(60394),f=r(25767),d=r(31060),l=r(134),p=r(36443),v=r.n(p),b=r(80662),g=r.n(b),y=r(61499),U=r(63939),x=r(50932),m=r(4624),k=r(9705),A=r(51660),w=r(6403),I=r(85947),_=r(10754),B=r(71517),P=r(77231),S=r(52071),M=r(44328),R=r(72739),L=r(89088),z=r(20620),D=r(53e3),C=r(55611),F=r(58469),E=r(65451),N=r(25906),T=r(37837),O=r(14686),W=r(10662),V=r(92647),Y=r(60264),H=r(56397),K=r(75294),X=r(87771),J=r(29347),$=r(67672),j=r(51113),q=r(7309);function G(e,t,r){return t=(0,f.A)(t),(0,c.A)(e,Q()?n()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function Q(){try{var e=!Boolean.prototype.valueOf.call(n()(Boolean,[],(function(){})))}catch(e){}return(Q=function(){return!!e})()}var Z="src/avformat/formats/IMpegpsFormat.ts",ee=function(e){function t(){var e;return(0,s.A)(this,t),e=G(this,t),(0,l.A)((0,u.A)(e),"type",_.P.MPEGPS),(0,l.A)((0,u.A)(e),"context",void 0),(0,l.A)((0,u.A)(e),"cacheAVPacket",void 0),e.context={headerState:255,psmType:new(g()),pes:new w.xf,slices:new(g()),lastPtsMap:new(g()),imkhCctv:!1,sofdec:!1,ioEnded:!1},e}var r,a,n,c,p,b,I,Q;return(0,d.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e){e.ioReader&&e.ioReader.setEndian(!0),this.cacheAVPacket=0}},{key:"destroy",value:function(e){(0,h.A)((0,f.A)(t.prototype),"destroy",this).call(this,e),this.cacheAVPacket&&((0,B.Qe)(this.cacheAVPacket),this.cacheAVPacket=0),R.__(e.streams,(function(e){var t=e.privData;t.filter&&(t.filter.destroy(),t.filter=null)}))}},{key:"findNextStartCode",value:(Q=(0,i.A)(v().mark((function e(t){var r,a,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=255,a=0;case 2:if(!(a<W.V)){e.next=13;break}return e.next=5,t.ioReader.readUint8();case 5:if(n=e.sent,1!==r){e.next=9;break}return r=16777215&(r<<8|n),e.abrupt("break",13);case 9:r=16777215&(r<<8|n),a++,e.next=2;break;case 13:return a===W.V&&(r=-1),this.context.headerState=r,e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return Q.apply(this,arguments)})},{key:"parsePSM",value:(I=(0,i.A)(v().mark((function e(t){var r,a,n,i,s,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ioReader.readUint16();case 2:return r=e.sent,e.next=5,t.ioReader.skip(2);case 5:return e.next=7,t.ioReader.readUint16();case 7:return a=e.sent,e.next=10,t.ioReader.skip(a);case 10:return e.next=12,t.ioReader.readUint16();case 12:n=r-a-10;case 13:if(!(n>=4)){e.next=29;break}return e.next=16,t.ioReader.readUint8();case 16:return i=e.sent,e.next=19,t.ioReader.readUint8();case 19:return s=e.sent,e.next=22,t.ioReader.readUint16();case 22:return o=e.sent,this.context.psmType.set(s,i),e.next=26,t.ioReader.skip(o);case 26:n-=o+4,e.next=13;break;case 29:return e.next=31,t.ioReader.readUint32();case 31:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"readPES",value:(b=(0,i.A)(v().mark((function e(t){var r,a,n,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.findNextStartCode(t);case 3:if(!((r=e.sent)<0)){e.next=6;break}return e.abrupt("return",k.LR);case 6:if(442!==r&&443!==r){e.next=8;break}return e.abrupt("continue",0);case 8:if(446!==r&&447!==r){e.next=15;break}return e.next=11,t.ioReader.readUint16();case 11:return a=e.sent,e.next=14,t.ioReader.skip(a);case 14:case 18:return e.abrupt("continue",0);case 15:if(444!==r){e.next=19;break}return e.next=18,this.parsePSM(t);case 19:if(r>=448&&r<=479||r>=480&&r<=495||445==r||447==r||509==r){e.next=21;break}return e.abrupt("continue",0);case 21:return e.next=23,t.ioReader.readUint16();case 23:return n=e.sent,this.context.pes.pos=t.ioReader.getPos()-BigInt(6),this.context.pes.streamId=255&r,this.context.pes.streamType=this.context.psmType[this.context.pes.streamId],(i=new Uint8Array(n+6))[0]=0,i[1]=0,i[2]=1,i[3]=this.context.pes.streamId,i[4]=n>>8,i[5]=255&n,e.next=36,t.ioReader.readBuffer(n,i.subarray(6));case 36:return this.context.pes.data=i,e.abrupt("return",r);case 40:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"createStream",value:function(e,t,r,a){var n=0,i=-1;switch(r){case 226:i=0,n=27;break;case 128:i=1,n=86019;break;case 136:i=1,n=86020;break;case 160:i=1,n=65537;break;case 32:i=3,n=94208;break;default:switch(t){case 1:case 2:i=0,n=2;break;case 3:case 4:i=1,n=86017;break;case 15:i=1,n=86018;break;case 16:i=0,n=12;break;case 27:i=0,n=27;break;case 36:i=0,n=173;break;case 51:i=0,n=196;break;case 129:i=1,n=86019;break;case 144:i=1,n=65543;break;case 145:i=1,n=65542;break;case 447:i=2,n=98312;break;default:if(a>=480&&a<=495)i=0,n=87;else if(a>=448&&a<=479)i=1,n=86017;else if(a>=128&&a<=135)i=1,n=86019;else if(a>=136&&a<=143||a>=152&&a<=159)i=1,n=86020;else if(a>=176&&a<=191)i=1,n=86060;else if(a>=192&&a<=207)i=1,n=86019;else if(a>=32&&a<=63)i=3,n=94208;else{if(!(a>=64853&&a<=64863))return;i=0,n=70}}}var s=e.createStream();s.codecpar.codecType=i,s.codecpar.codecId=n,s.timeBase.den=9e4,s.timeBase.num=1;var o=s.privData={streamId:r,streamType:t,filter:null};return 65543!==n&&65542!==n||(s.codecpar.chLayout.nbChannels=1,s.codecpar.sampleRate=8e3,s.codecpar.chLayout.order=1,s.codecpar.chLayout.u.mask=BigInt(4)),86017===s.codecpar.codecId?o.filter=new H.A:86019===s.codecpar.codecId?o.filter=new j.A:86020===s.codecpar.codecId&&(o.filter=new q.A),o.filter&&o.filter.init(s.codecpar[y.o9],s.timeBase[y.o9]),s}},{key:"readHeader",value:(p=(0,i.A)(v().mark((function e(t){var r,a,n,i,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ioReader.peekString(6);case 2:if("IMKH"!==(r=e.sent).substring(0,4)){e.next=9;break}return this.context.imkhCctv=!0,e.next=7,t.ioReader.skip(4);case 7:e.next=13;break;case 9:if("Sofdec"!==r){e.next=13;break}return this.context.sofdec=!0,e.next=13,t.ioReader.skip(6);case 13:return e.next=15,t.ioReader.peekUint32();case 15:if(442===e.sent){e.next=19;break}return m.z3("the file format is not mpegps",Z,379),e.abrupt("return",k.LR);case 19:if(!(1&t.ioReader.flags)){e.next=44;break}return a=t.ioReader.getPos(),n=BigInt(500)*BigInt(1e3),e.next=24,t.ioReader.fileSize();case 24:return i=e.sent,(s=i-n)<a&&(s=a),e.next=29,t.ioReader.seek(s);case 29:e.prev=29,this.context.pes.pts=P.Dh;case 31:return e.next=34,this.readPES(t);case 34:(0,A.A)(this.context.pes),this.context.pes.pts!==P.Dh&&this.context.lastPtsMap.set(this.context.pes.streamId,this.context.pes.pts),e.next=31;break;case 38:e.next=44;break;case 40:return e.prev=40,e.t0=e.catch(29),e.next=44,t.ioReader.seek(a);case 44:return this.context.ioEnded=!1,e.abrupt("return",0);case 46:case"end":return e.stop()}}),e,this,[[29,40]])}))),function(e){return p.apply(this,arguments)})},{key:"checkExtradata",value:function(e,t){if(86017===t.codecpar.codecId&&t.codecpar.sampleRate===P.N_){var r=(0,B.iI)(e),a=r[1]>>>3&3,n=(6&r[1])>>1,i=(12&r[2])>>>2,s=3&~(r[3]>>>6)?2:1,o=L.Au(n),c=L.Y2(a,i);t.codecpar.profile=o,t.codecpar.sampleRate=c,t.codecpar.chLayout.nbChannels=s}else if(86019===t.codecpar.codecId&&t.codecpar.sampleRate===P.N_){var u=(0,B.iI)(e),h=X.R(u);$.ai(h)||(t.codecpar.sampleRate=h.sampleRate,t.codecpar.chLayout.nbChannels=h.channels,t.codecpar.bitrate=BigInt(h.bitrate))}else if(86020===t.codecpar.codecId&&t.codecpar.sampleRate===P.N_){var f=(0,B.iI)(e),d=J.R(f);$.ai(d)||(t.codecpar.sampleRate=d.sampleRate,t.codecpar.chLayout.nbChannels=d.channels,t.codecpar.bitrate=BigInt(0|d.bitrate))}else if(!t.codecpar.extradata){var l=(0,B.rU)(e,1);l&&(t.codecpar.extradata=(0,T.sY)(U.f[15](l+4)),(0,O.Mr)(t.codecpar.extradata,U.f[20](l),U.f[15](l+4)),t.codecpar.extradataSize=U.f[15](l+4),(0,B.Is)(e,1),27===t.codecpar.codecId?z.XC(t,(0,O.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):173===t.codecpar.codecId?D.XC(t,(0,O.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):196===t.codecpar.codecId?C.XC(t,(0,O.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):86018===t.codecpar.codecId?F.XC(t,(0,O.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):86076===t.codecpar.codecId&&E.XC(t,(0,O.JW)(t.codecpar.extradata,t.codecpar.extradataSize)))}}},{key:"parseSlice",value:function(e,t,r,a){var n=(0,V.A)(Uint8Array,e.buffers),i=a.privData;1===a.codecpar.codecType&&x.M[15](r+36,1|U.f[15](r+36));var s=a.codecpar.codecId;27!==s&&173!==s&&196!==s||x.M[15](r+80,2),x.M[15](r+32,a.index),x.M[17](r+16,e.dts),x.M[17](r+8,e.pts),x.M[17](r+56,e.pos),x.M[15](r+76,9e4),x.M[15](r+72,1),a.startTime===P.Dh&&(a.startTime=U.f[17](r+8)||U.f[17](r+16),this.context.lastPtsMap.has(i.streamId)&&(a.duration=this.context.lastPtsMap.get(i.streamId)-a.startTime));var o=(0,T.sY)(n.length);if((0,O.lW)(o,n.length,n),(0,B.NX)(r,o,n.length),i.filter){if(i.filter.sendAVPacket(r)<0)return m.z3("send avpacket to bsf failed",Z,527),k.LR;if(i.filter.receiveAVPacket(r)<0)return m.z3("receive avpacket from bsf failed",Z,534),k.LR;for(x.M[15](r+76,9e4),x.M[15](r+72,1),x.M[15](r+32,a.index),this.checkExtradata(r,a);;){var c=this.cacheAVPacket||(0,B._5)();if(0!==i.filter.receiveAVPacket(c)){this.cacheAVPacket=c;break}x.M[15](c+76,9e4),x.M[15](c+72,1),x.M[15](c+32,a.index),this.checkExtradata(c,a),t.interval.packetBuffer.push(c),this.cacheAVPacket=0}}else 2===a.codecpar.codecId?N.K(r)&&x.M[15](r+36,1|U.f[15](r+36)):27===a.codecpar.codecId?(a.codecpar.extradata||(z.ci(r,!0),this.checkExtradata(r,a),a.codecpar.bitFormat=2),z.KD(r)&&x.M[15](r+36,1|U.f[15](r+36))):173===a.codecpar.codecId?(a.codecpar.extradata||(D.ci(r,!0),this.checkExtradata(r,a),a.codecpar.bitFormat=2),D.KD(r)&&x.M[15](r+36,1|U.f[15](r+36))):196===a.codecpar.codecId&&(a.codecpar.extradata||(C.ci(r,!0),this.checkExtradata(r,a),a.codecpar.bitFormat=2),C.KD(r)&&x.M[15](r+36,1|U.f[15](r+36)))}},{key:"readAVPacket_",value:(c=(0,i.A)(v().mark((function e(t,r){var a,n,i,s,o,c,u,h,f,d,l,p,b,g,y,U,x,m,k,w,I,_,B,S,M,R=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.readPES(t);case 3:if(a=e.sent,(n=t.streams.find((function(e){return e.privData.streamId===R.context.pes.streamId})))||(i=255&a,n=this.createStream(t,this.context.psmType.get(i),i,a)),!n){e.next=120;break}if(s=n.privData,(0,A.A)(this.context.pes),this.context.pes.payload){e.next=11;break}return e.abrupt("continue",0);case 11:if((o=this.context.slices.get(s.streamId))||(o={pts:-BigInt(1),dts:-BigInt(1),pos:-BigInt(1),buffers:[]},this.context.slices.set(s.streamId,o)),this.context.pes.dts!==P.Dh&&o.buffers.length){e.next=112;break}if(this.context.pes.dts===P.Dh){e.next=108;break}if(o.dts=this.context.pes.dts,o.pts=this.context.pes.pts,o.pos=this.context.pes.pos,0!==n.codecpar.codecType){e.next=23;break}(c=Y.Ky(this.context.pes.payload,0)).offset>3&&(this.context.pes.payload=this.context.pes.payload.subarray(c.offset)),e.next=108;break;case 23:if(86019!==n.codecpar.codecId&&86020!==n.codecpar.codecId&&86017!==n.codecpar.codecId){e.next=108;break}u=0,h=2,86019===n.codecpar.codecId?u=11:86017===n.codecpar.codecId?u=255:(u=127,h=4),f=0;case 28:if(!(f<this.context.pes.payload.length-h)){e.next=108;break}if(this.context.pes.payload[f]!==u){e.next=105;break}if(d=this.context.pes.payload[f+1],l=2,86017!==n.codecpar.codecId||224&~d){e.next=61;break}if(0===f){e.next=58;break}p=0,b=0;case 36:if(g=new K.FrameHeader,K.parse(g,this.context.pes.payload[f+b]<<24|this.context.pes.payload[f+b+1]<<16|this.context.pes.payload[f+b+2]<<8|this.context.pes.payload[f+b+3]),y=this.context.pes.payload[f+b+1]>>>3&3,U=(12&this.context.pes.payload[f+b+2])>>>2,x=L.Y2(y,U),!((m=K.getFrameLength(g,x))&&f+b+m<this.context.pes.payload.length-2&&255===this.context.pes.payload[f+b+m])||224&~this.context.pes.payload[f+b+m+1]){e.next=50;break}if(p++,b+=m,p!==l){e.next=48;break}return e.abrupt("break",53);case 48:e.next=51;break;case 50:return e.abrupt("break",53);case 51:e.next=36;break;case 53:if(p!==l){e.next=57;break}this.context.pes.payload=this.context.pes.payload.subarray(f),e.next=58;break;case 57:return e.abrupt("continue",105);case 58:return e.abrupt("break",108);case 61:if(86019!==n.codecpar.codecId||119!==d){e.next=83;break}if(0===f){e.next=82;break}k=0,w=0;case 65:if(I=X.R(this.context.pes.payload.subarray(f+w)),$.ai(I)||!(f+w+I.frameSize<this.context.pes.payload.length-2)||11!==this.context.pes.payload[f+w+I.frameSize]||119!==this.context.pes.payload[f+w+I.frameSize+1]){e.next=74;break}if(k++,w+=I.frameSize,k!==l){e.next=72;break}return e.abrupt("break",77);case 72:e.next=75;break;case 74:return e.abrupt("break",77);case 75:e.next=65;break;case 77:if(k!==l){e.next=81;break}this.context.pes.payload=this.context.pes.payload.subarray(f),e.next=82;break;case 81:return e.abrupt("continue",105);case 82:return e.abrupt("break",108);case 83:if(86020!==n.codecpar.codecId||254!==d||128!==this.context.pes.payload[f+2]||129!==this.context.pes.payload[f+3]){e.next=105;break}if(0===f){e.next=104;break}_=0,B=0;case 87:if(S=J.R(this.context.pes.payload.subarray(f+B)),$.ai(S)||!(f+B+S.frameSize<this.context.pes.payload.length-4)||127!==this.context.pes.payload[f+B+S.frameSize]||254!==this.context.pes.payload[f+B+S.frameSize+1]||128!==this.context.pes.payload[f+B+S.frameSize+2]||129!==this.context.pes.payload[f+B+S.frameSize+3]){e.next=96;break}if(_++,B+=S.frameSize,_!==l){e.next=94;break}return e.abrupt("break",99);case 94:e.next=97;break;case 96:return e.abrupt("break",99);case 97:e.next=87;break;case 99:if(_!==l){e.next=103;break}this.context.pes.payload=this.context.pes.payload.subarray(f),e.next=104;break;case 103:return e.abrupt("continue",105);case 104:return e.abrupt("break",108);case 105:f++,e.next=28;break;case 108:return o.buffers.push(this.context.pes.payload),e.abrupt("continue",0);case 112:return 0===n.codecpar.codecType&&(M=Y.Ky(this.context.pes.payload,0)).offset>3&&(o.buffers.push(this.context.pes.payload.subarray(0,M.offset)),this.context.pes.payload=this.context.pes.payload.subarray(M.offset)),this.parseSlice(o,t,r,n),o.buffers.length=0,o.buffers.push(this.context.pes.payload),o.dts=this.context.pes.dts,o.pts=this.context.pes.pts,o.pos=this.context.pes.pos,e.abrupt("return",0);case 120:e.next=0;break;case 122:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"readAVPacket",value:(n=(0,i.A)(v().mark((function e(t,r){var a,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.context.ioEnded){e.next=10;break}if(!this.context.slices.size){e.next=9;break}if(this.context.slices.forEach((function(e,r){e.buffers.length&&(n=t.streams.find((function(e){return e.privData.streamId===r})))&&(a=e)})),!a){e.next=9;break}return this.parseSlice(a,t,r,n),a.buffers.length=0,a.pts=a.dts=a.pos=-BigInt(1),e.abrupt("return",0);case 9:return e.abrupt("return",-1048576);case 10:return e.next=12,this.readAVPacket_(t,r);case 12:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(0),-1048576===t.ioReader.error){e.next=22;break}return m.z3("read packet error, ".concat(e.t0),Z,848),e.abrupt("return",k.LR);case 22:return this.context.ioEnded=!0,e.abrupt("return",this.readAVPacket(t,r));case 24:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(e,t){return n.apply(this,arguments)})},{key:"syncPSPacket",value:(a=(0,i.A)(v().mark((function e(t){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=P.Dh,e.prev=1,this.context.pes.pts=P.Dh;case 3:if(this.context.pes.pts!==P.Dh){e.next=10;break}return e.next=6,this.readPES(t);case 6:(0,A.A)(this.context.pes),r=this.context.pes.pos,e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r=P.Dh;case 15:if(r===P.Dh){e.next=18;break}return e.next=18,t.ioReader.seek(r);case 18:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(e){return a.apply(this,arguments)})},{key:"seek",value:(r=(0,i.A)(v().mark((function e(t,r,a,n){var i,s,o,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.ioReader.getPos(),this.context.slices.forEach((function(e){e.buffers.length&&e.pos<i&&(i=e.pos),e.buffers.length=0,e.pts=e.dts=e.pos=-BigInt(1)})),t.streams.forEach((function(e){var t=e.privData;t.filter&&t.filter.reset()})),!(2&n)){e.next=19;break}return e.next=6,t.ioReader.fileSize();case 6:if(!((s=e.sent)<=BigInt(0))){e.next=9;break}return e.abrupt("return",BigInt(k.E$));case 9:return a<BigInt(0)?a=BigInt(0):a>s&&(a=s),e.next=12,t.ioReader.seek(a);case 12:if(4&n){e.next=15;break}return e.next=15,this.syncPSPacket(t);case 15:case 25:return this.context.ioEnded=!1,e.abrupt("return",i);case 19:if(!r||!r.sampleIndexes.length){e.next=27;break}if(!((o=R.El(r.sampleIndexes,(function(e){return e.pts>a?-1:1})))>0&&(0,M.k)(a-r.sampleIndexes[o-1].pts,r.timeBase,P.i0)<BigInt(1e4))){e.next=27;break}return m.Yz("seek in sampleIndexes, found index: ".concat(o,", pts: ").concat(r.sampleIndexes[o-1].pts,", pos: ").concat(r.sampleIndexes[o-1].pos),Z,933),e.next=25,t.ioReader.seek(r.sampleIndexes[o-1].pos);case 27:return m.Yz("not found any keyframe index, try to seek in bytes",Z,940),e.next=30,(0,S.A)(t,r,a,BigInt(0),this.readAVPacket.bind(this),this.syncPSPacket.bind(this));case 30:return(c=e.sent)>=0&&(this.context.ioEnded=!1),e.abrupt("return",c);case 33:case"end":return e.stop()}}),e,this)}))),function(e,t,a,n){return r.apply(this,arguments)})},{key:"getAnalyzeStreamsCount",value:function(){return 1}}]),t}(I.A)},75294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FrameHeader:()=>o,getFrameLength:()=>u,parse:()=>c});var a=r(81570),n=r(78716),i=r(134),s=r(89088),o=(0,a.A)((function e(){(0,n.A)(this,e),(0,i.A)(this,"version",void 0),(0,i.A)(this,"layer",void 0),(0,i.A)(this,"protection",void 0),(0,i.A)(this,"bitrateIndex",void 0),(0,i.A)(this,"samplingFrequency",void 0),(0,i.A)(this,"padding",void 0),(0,i.A)(this,"private",void 0),(0,i.A)(this,"mode",void 0),(0,i.A)(this,"modeExtension",void 0),(0,i.A)(this,"copyright",void 0),(0,i.A)(this,"original",void 0),(0,i.A)(this,"emphasis",void 0)}));function c(e,t){e.version=t>>19&3,e.layer=t>>17&3,e.protection=t>>16&1,e.bitrateIndex=t>>12&15,e.samplingFrequency=t>>10&3,e.padding=t>>9&1,e.mode=t>>6&3,e.modeExtension=t>>4&3,e.copyright=t>>3&1,e.original=t>>2&1,e.emphasis=3&t}function u(e,t){var r=s.oz(e.version,e.layer,e.bitrateIndex);switch(e.layer){case 1:default:r=144e3*r/(t<<(3===e.version?0:1))>>>0,r+=e.padding;break;case 2:r=144e3*r/t>>>0,r+=e.padding;break;case 3:r=4*((r=12e3*r/t>>>0)+e.padding)}return r}},51660:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(77231),n=r(4624),i=r(9705),s="src/avformat/formats/mpegts/function/parsePES.ts";function o(e){var t=e.data,r=t[3],o=t[4]<<8|t[5],c=0,u=0,h=0;if(188!==r&&190!==r&&191!==r&&240!==r&&241!==r&&255!==r&&242!==r&&248!==r){for(var f=a.Dh,d=a.Dh;;){if(6+u>=t.length)return;if(255!==(h=t[6+u]))break;u++}if(64==(192&h)&&(h=t[6+(u+=2)]),32==(224&h))c+=5,f=f=BigInt(Math.floor(536870912*(14&t[6+u])+4194304*(255&t[7+u])+16384*(254&t[8+u])+128*(255&t[9+u])+(254&t[10+u])/2)),16&h?(d=BigInt(Math.floor(536870912*(14&t[11+u])+4194304*(255&t[12+u])+16384*(254&t[13+u])+128*(255&t[14+u])+(254&t[15+u])/2)),c+=5):d=f;else if(128==(192&h)){var l=(192&t[7+u])>>>6;c=3+t[8+u],2!==l&&3!==l||(f=BigInt(Math.floor(536870912*(14&t[9+u])+4194304*(255&t[10+u])+16384*(254&t[11+u])+128*(255&t[12+u])+(254&t[13+u])/2)),d=3===l?BigInt(Math.floor(536870912*(14&t[14+u])+4194304*(255&t[15+u])+16384*(254&t[16+u])+128*(255&t[17+u])+(254&t[18+u])/2)):f)}else{if(15!==h)return n.z3("invalid data",s,121),i.LR;c=1}e.dts=d,e.pts=f;var p=6+u+c,v=0;if(0!==o){if(o<u+c)return void n.z3("Malformed PES: PES_packet_length < 3 + PES_header_data_length",s,133);v=o-(u+c)}else v=t.byteLength-p;e.payload=t.subarray(p,p+v)}else if((188===r||191===r||240===r||241===r||255===r||242===r||248===r)&&6===e.streamId){var b;b=0!==o?o:t.byteLength-6,e.payload=t.subarray(6,6+b)}return 0}},10662:(e,t,r)=>{"use strict";r.d(t,{V:()=>a});var a=1e5},6403:(e,t,r)=>{"use strict";r.d(t,{Cd:()=>d,I4:()=>p,am:()=>h,kJ:()=>l,pi:()=>f,xf:()=>v}),r(77193),r(25767),r(31060);var a=r(81570),n=r(78716),i=r(134),s=r(80662),o=r.n(s),c=(r(88435),r(77231)),u=(0,a.A)((function e(){(0,n.A)(this,e),(0,i.A)(this,"discontinuityIndicator",0),(0,i.A)(this,"randomAccessIndicator",0),(0,i.A)(this,"elementaryStreamPriorityIndicator",0),(0,i.A)(this,"pcrFlag",0),(0,i.A)(this,"opcrFlag",0),(0,i.A)(this,"splicingPointFlag",0),(0,i.A)(this,"transportPrivateDataFlag",0),(0,i.A)(this,"adaptationFieldExtensionFlag",0),(0,i.A)(this,"pcr",BigInt(0)),(0,i.A)(this,"opcr",BigInt(0)),(0,i.A)(this,"spliceCountDown",0),(0,i.A)(this,"transportPrivateData",null),(0,i.A)(this,"extension",null)})),h=(0,a.A)((function e(){(0,n.A)(this,e),(0,i.A)(this,"pos",c.Dh),(0,i.A)(this,"payloadUnitStartIndicator",0),(0,i.A)(this,"transportPriority",0),(0,i.A)(this,"pid",c.N_),(0,i.A)(this,"adaptationFieldControl",0),(0,i.A)(this,"continuityCounter",0),(0,i.A)(this,"transportScramblingControl",0),(0,i.A)(this,"adaptationFieldInfo",new u),(0,i.A)(this,"payload",null)})),f=(0,a.A)((function e(){(0,n.A)(this,e),(0,i.A)(this,"slices",[]),(0,i.A)(this,"totalLength",0),(0,i.A)(this,"expectedLength",c.N_),(0,i.A)(this,"randomAccessIndicator",0),(0,i.A)(this,"pid",c.N_),(0,i.A)(this,"streamType",0),(0,i.A)(this,"pos",c.Dh)})),d=(0,a.A)((function e(){(0,n.A)(this,e),(0,i.A)(this,"versionNumber",0),(0,i.A)(this,"networkPid",c.N_),(0,i.A)(this,"program2PmtPid",new(o()))})),l=(0,a.A)((function e(){(0,n.A)(this,e),(0,i.A)(this,"tag",void 0),(0,i.A)(this,"buffer",void 0)})),p=(0,a.A)((function e(){(0,n.A)(this,e),(0,i.A)(this,"versionNumber",0),(0,i.A)(this,"programNumber",0),(0,i.A)(this,"pcrPid",0),(0,i.A)(this,"pid2StreamType",new(o())),(0,i.A)(this,"pid2ESDescriptor",new(o()))})),v=(0,a.A)((function e(){(0,n.A)(this,e),(0,i.A)(this,"pid",c.N_),(0,i.A)(this,"streamType",0),(0,i.A)(this,"streamId",c.N_),(0,i.A)(this,"dts",c.Dh),(0,i.A)(this,"pts",c.Dh),(0,i.A)(this,"pos",c.Dh),(0,i.A)(this,"payload",null),(0,i.A)(this,"data",null),(0,i.A)(this,"randomAccessIndicator",0)}))},2187:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var a=r(72739),n=r(44328),i=r(77231);function s(e,t,r){var s=BigInt(0);return a.__(e,(function(e){s+=e.codecpar.bitrate*(0,n.k)(t,r,i.i0)/BigInt(8e3)})),s}},52071:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var a=r(25182),n=r(36443),i=r.n(n),s=r(63939),o=r(9599),c=r(29170),u=r(77231),h=r(44328),f=r(2187),d=r(71517),l=r(9705),p=r(4624),v="src/avformat/function/seekInBytes.ts";function b(e,t,r,a,n,i){return g.apply(this,arguments)}function g(){return(g=(0,a.A)(i().mark((function e(t,r,a,n,b,g){var y,U,x,m,k,A,w,I,_,B,P,S,M,R;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=t.ioReader.getPos(),e.next=3,t.ioReader.fileSize();case 3:if(U=e.sent,x=u.Dh,m=a,r.startTime!==u.Dh?m-=r.startTime:m-=r.firstDTS,!((k=(0,h.k)(a,r.timeBase,u.i0))<BigInt(1e4))){e.next=13;break}return p.Yz("seek pts is earlier then 10s, seek to first packet pos(".concat(n,") directly"),v,63),e.next=12,t.ioReader.seek(n);case 12:return e.abrupt("return",y);case 13:if(A=(0,f.d)(t.streams,m,r.timeBase),w=U-(0,f.d)(t.streams,BigInt(5e3),u.i0),I=(0,f.d)(t.streams,BigInt(1e4),u.i0),A>w&&(A=w),!(A<n)){e.next=21;break}return e.next=20,t.ioReader.seek(n);case 20:return e.abrupt("return",y);case 21:_=(0,d._5)(),B=U,P=BigInt(0);case 24:if(!(B-P<I)){e.next=28;break}return x=P,e.abrupt("break",51);case 28:return e.next=30,t.ioReader.seek(A);case 30:return e.next=32,g(t);case 32:return S=t.ioReader.getPos(),e.next=35,b(t,_);case 35:if(!(e.sent>=0)){e.next=48;break}if(M=(0,h.k)(s.f[17](_+8),(0,c.A)(_+72,o.P),u.i0),R=M-k,p.Yz("try to seek to pos: ".concat(A,", got packet pts: ").concat(s.f[17](_+8),"(").concat(M,"ms), diff: ").concat(R,"ms"),v,98),!(R<=BigInt(0)&&-R<BigInt(1e4))){e.next=45;break}return x=S,e.abrupt("break",51);case 45:A=R>BigInt(0)?P+(B=A)>>BigInt(1):(P=A)+B>>BigInt(1);case 46:e.next=49;break;case 48:return e.abrupt("break",51);case 49:e.next=24;break;case 51:if((0,d.Qe)(_),x===u.Dh){e.next=61;break}return p.Yz("finally seek to pos ".concat(x),v,124),e.next=56,t.ioReader.seek(x);case 56:return e.next=58,g(t);case 58:return e.abrupt("return",y);case 61:return e.next=63,t.ioReader.seek(y);case 63:return e.abrupt("return",BigInt(l.E$));case 64:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},23991:(e,t,r)=>{"use strict";function a(e){for(var t=0;t<32&&0===e.readU1();)t++;return e.readU(t)+((1<<t)-1)}function n(e){var t=a(e);return 1&t?(t+1)/2:-t/2}r.d(t,{$x:()=>n,xb:()=>a})},39381:(e,t,r)=>{"use strict";r.d(t,{E3:()=>i,Sg:()=>u,Y0:()=>c,ht:()=>o,r8:()=>n,yd:()=>s});var a=r(63939);function n(e){return a.f[2](e)}function i(e){return n(e+1)<<8|n(e)}function s(e){return n(e)<<8|n(e+1)}function o(e){return n(e)<<16|n(e+1)<<8|n(e+2)}function c(e){return i(e+2)<<16|i(e)}function u(e){return s(e)<<16|s(e+2)}},60264:(e,t,r)=>{"use strict";function a(e){return e.length>4&&0===e[0]&&0===e[1]&&(1===e[2]||0===e[2]&&1===e[3])}function n(e,t){for(var r=0,a=t;a<e.length;a++)switch(e[a]){case 0:r++;break;case 1:if(r>=2)return{offset:a-Math.min(r,3),startCode:Math.min(r+1,4)};r=0;break;default:r=0}return{offset:-1,startCode:0}}function i(e){for(var t=[],r=n(e,0),a={offset:-1,startCode:0};(a=n(e,r.offset+r.startCode)).offset>-1;)t.push(e.subarray(r.offset+r.startCode,a.offset,!0)),r=a;return t.push(e.subarray(r.offset+r.startCode,void 0,!0)),t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;r||(r=e.length);for(var a=new Uint8Array(e.length),n=0,i=0,s=0;s<e.length;s++){if(s>=t&&s<r)if(0===e[s])n++;else if(3===e[s]&&2===n&&s+1<e.length&&e[s+1]<=3){if(++s===e.length)break;n=0===e[s]?1:0}else n=0;a[i++]=e[s]}return a.slice(0,i)}r.d(t,{BN:()=>s,Bs:()=>a,Ky:()=>n,py:()=>i})},37246:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(78716),n=r(81570),i=r(134),s=r(4624),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,a.A)(this,e),(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"pointer",void 0),(0,i.A)(this,"bitsLeft",void 0),(0,i.A)(this,"size",void 0),(0,i.A)(this,"endPointer",void 0),(0,i.A)(this,"error",void 0),(0,i.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.size=t,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,n.A)(e,[{key:"peekU1",value:function(){(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();var e=this.pointer,t=this.bitsLeft;return 0===t&&(e++,t=8),this.buffer[e]>>t-1&1}},{key:"readU1",value:function(){var e;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,e=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8),e}},{key:"readU",value:function(e){for(var t=0,r=0;r<e;r++)t|=this.readU1()<<e-r-1;return t}},{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"getBitLeft",value:function(){return this.bitsLeft}},{key:"getPos",value:function(){return this.pointer}},{key:"backToPos",value:function(e){this.pointer=e}},{key:"skip",value:function(e){var t=(e-e%8)/8;this.pointer+=t;var r=e%8;this.bitsLeft<=r?(this.pointer++,this.bitsLeft=8-(r-this.bitsLeft)):this.bitsLeft-=r}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&this.pointer++,!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);var e=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(e<0)throw this.error=e,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+e,this.pointer=0}else{var t=this.onFlush(this.buffer);if(this.endPointer=t,this.pointer=0,this.bitsLeft=8,t<0)throw this.error=t,Error("IOReader error, flush failed")}}},{key:"getBuffer",value:function(){return this.buffer}},{key:"appendBuffer",value:function(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{var t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,s.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",198)}}},{key:"clear",value:function(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0}},{key:"skipPadding",value:function(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++)}}]),e}()},83314:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(78716),n=r(81570),i=r(134),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,a.A)(this,e),(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"pointer",void 0),(0,i.A)(this,"bitPointer",void 0),(0,i.A)(this,"size",void 0),(0,i.A)(this,"error",void 0),(0,i.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=t,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,n.A)(e,[{key:"writeU1",value:function(e){(this.remainingLength()<1||1===this.remainingLength()&&this.bitPointer>=8)&&this.flush(),1&e?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,8===this.bitPointer&&(this.pointer++,this.bitPointer=0)}},{key:"writeU",value:function(e,t){for(var r=0;r<e;r++)this.writeU1(t>>e-r-1&1)}},{key:"remainingLength",value:function(){return this.size-this.pointer}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer)if(this.bitPointer&&this.pointer>1){var e=this.onFlush(this.buffer.subarray(0,this.pointer-1));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(0===this.bitPointer){var t=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("BSWriter error, flush failed")}this.pointer=0}},{key:"padding",value:function(){for(;0!==this.bitPointer;)this.writeU1(0)}},{key:"clear",value:function(){this.pointer=0,this.bitPointer=0,this.error=0}},{key:"getBuffer",value:function(){return this.buffer}},{key:"getPointer",value:function(){return this.pointer}}]),e}()},729:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(78716),n=r(81570),i=r(134),s=r(4624),o=r(50011),c=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,a.A)(this,e),(0,i.A)(this,"data",void 0),(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"byteStart",void 0),(0,i.A)(this,"pos",void 0),(0,i.A)(this,"size",void 0),(0,i.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!r}return(0,n.A)(e,[{key:"writeUint8",value:function(e){this.data.setUint8(this.pos+++this.byteStart,e)}},{key:"writeUint16",value:function(e){this.data.setUint16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeUint24",value:function(e){var t=3840&e,r=240&e,a=15&e;this.littleEndian?(this.writeUint8(a),this.writeUint8(r),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(r),this.writeUint8(a))}},{key:"writeUint32",value:function(e){this.data.setUint32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeUint64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeUint32(Number(t)),this.writeUint32(Number(r))):(this.writeUint32(Number(r)),this.writeUint32(Number(t)))}},{key:"writeInt8",value:function(e){this.data.setInt8(this.pos+++this.byteStart,e)}},{key:"writeInt16",value:function(e){this.data.setInt16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeInt32",value:function(e){this.data.setInt32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeInt64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeInt32(Number(t)),this.writeInt32(Number(r))):(this.writeInt32(Number(r)),this.writeInt32(Number(t)))}},{key:"writeFloat",value:function(e){this.data.setFloat32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeDouble",value:function(e){this.data.setFloat64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}},{key:"getPos",value:function(){return this.pos}},{key:"seek",value:function(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}},{key:"skip",value:function(e){this.seek(this.pos+e)}},{key:"back",value:function(e){this.seek(this.pos-e)}},{key:"remainingSize",value:function(){return this.size-this.pos}},{key:"writeBuffer",value:function(e){var t=e.length;this.remainingSize()<t&&(t=this.remainingSize(),s.R8("the remaining buffer size is smaller then the wrote buffer, hope set ".concat(e.length,", but set ").concat(t),"src/common/io/BufferWriter.ts",211)),this.buffer.set(e,this.pos),this.pos+=e.length}},{key:"writeString",value:function(e){var t=o.encode(e);return this.writeBuffer(t),t.length}},{key:"getWroteBuffer",value:function(){return this.buffer.subarray(0,this.pos)}},{key:"resetBuffer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}]),e}()},80345:(e,t,r)=>{r(28351),e.exports=r(46438).Reflect.get},28351:(e,t,r)=>{var a=r(81033),n=r(66123),i=r(75509),s=r(88535),o=r(24401),c=r(80812);s(s.S,"Reflect",{get:function e(t,r){var s,u,h=arguments.length<3?t:arguments[2];return c(t)===h?t[r]:(s=a.f(t,r))?i(s,"value")?s.value:void 0!==s.get?s.get.call(h):void 0:o(u=n(t))?e(u,r,h):void 0}})},60394:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(80345),n=r(3706),i=r(41473);function s(){return s="undefined"!=typeof Reflect&&a?a.bind():function(e,t,r){var a=(0,i.A)(e,t);if(a){var s=n(a,t);return s.get?s.get.call(arguments.length<3?e:r):s.value}},s.apply(this,arguments)}},41473:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(25767);function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,a.A)(e)););return e}}}]);